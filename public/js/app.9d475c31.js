(function(t){function e(e){for(var s,i,l=e[0],c=e[1],n=e[2],u=0,p=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,n||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var c=a[l];0!==o[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},o={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var n=0;n<l.length;n++)e(l[n]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034b":function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(t){var e=r(t);return a(e)}function r(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}o.keys=function(){return Object.keys(s)},o.resolve=r,t.exports=o,o.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);var s,o,r,i,l=a("2b0e"),c=function(){var t=this,e=t._self._c;return"PURCHASE PRODUCTS"!=t.currentRouteName&&"Print Inventory"!=t.currentRouteName&&"Print Sales"!=t.currentRouteName&&"SALES RECEIPT"!=t.currentRouteName&&"EXPENSE DETAILS"!=t.currentRouteName&&"REMITTANCE"!=t.currentRouteName&&"PSPOILAGE"!=t.currentRouteName||"CHANGE ITEM"!=t.currentRouteName?e("div",{staticClass:"container-fluid",attrs:{id:"app"}},[t.$session.exists()?e("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-transparent"},[e("router-link",{staticClass:"navbar-brand sansita",attrs:{to:"/"}},[t._v("Generic POS")]),e("div",{staticClass:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2"}),e("div",{staticClass:"mr-5 order-0"},[e("a",{staticClass:"navbar-brand",staticStyle:{"margin-right":"80px"},attrs:{href:"#"}},[t._v(t._s(t.currentRouteName))]),t._m(0)]),e("div",{staticClass:"navbar-collapse collapse w-100 order-2 dual-collapse2"},[e("ul",{staticClass:"navbar-nav ml-auto"},[e("li",{staticClass:"nav-item"},[t._v(" "+t._s(t.someDate)+" ")])])])],1):t._e(),e("div",{staticClass:"container-full"},[e("router-view")],1)]):e("div",{attrs:{id:"app"}},[e("div",{staticClass:"container-full"},[e("router-view")],1)])},n=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":".dual-collapse2"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],d=a("c1df"),u=a.n(d),p={data(){return{someDate:new Date}},computed:{currentRouteName(){return this.$route.name}},created(){setInterval(()=>{this.someDate=u()().format("dddd, MMMM Do YYYY, h:mm:ss a")},1e3)},methods:{}},m=p,_=a("2877"),v=Object(_["a"])(m,c,n,!1,null,null,null),h=v.exports,g=a("8c4f"),f=a("0628"),b=a.n(f),C=a("1fca"),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/terminal"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-cash-register fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Cash Register")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/product"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-shopping-basket fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Products")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/category"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-tags fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Categories")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/purchase"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-shopping-bag fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Purchase")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/sales-report"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-store fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Sales Report")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/inventory"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-boxes fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Inventory")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/cash-drop"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-file-invoice-dollar fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Cash Drop")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/expense"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-money-check-alt fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Expense")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/change-item"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-exchange-alt fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Change Item")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/spoilage"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-dumpster fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Spoilages")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/supplier"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-truck fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Supplier")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("router-link",{attrs:{to:"/settings"}},[e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-cog fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Settings")])])])])])])])],1),e("div",{staticClass:"col-xl-3 col-sm-6 col-12 p-3"},[e("a",{on:{click:t.logout}},[t._m(0)])])])},x=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card bg-dark text-white",staticStyle:{cursor:"pointer"}},[e("div",{staticClass:"card-content p-2"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"media d-flex"},[e("div",{staticClass:"align-self-center"},[e("i",{staticClass:"fas fa-sign-out-alt fa-5x float-left"})]),e("div",{staticClass:"media-body align-self-end text-right"},[e("h3",[t._v("Logout")])])])])])])}],w=(a("14d9"),{created(){},data(){return{}},methods:{logout(){if(this.$session.exists()){if(!confirm("Continue to logout?"))return!1;this.$session.destroy(),this.$router.push("/login")}}}}),P=w,k=Object(_["a"])(P,y,x,!1,null,null,null),S=k.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-9 col-md-7 col-lg-5 mx-auto"},[e("div",{staticClass:"card card-signin my-5"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title text-center"},[t._v("POS Login")]),e("form",{staticClass:"form-signin",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",id:"inputUser",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("label",{attrs:{for:"inputUser"}},[t._v("Username")])]),e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.userpassword,expression:"userpassword"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.userpassword},on:{input:function(e){e.target.composing||(t.userpassword=e.target.value)}}}),e("label",{attrs:{for:"inputPassword"}},[t._v("Password")])]),e("button",{staticClass:"btn btn-lg btn-primary btn-block text-uppercase",attrs:{type:"submit"}},[t._v("Sign in")]),e("div",{staticClass:"alert alert-sucess text-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]),e("hr",{staticClass:"my-4"})])])])])])])},T=[],N={data(){return{userpassword:null,username:null,msg:""}},created(){},methods:{validUsername(){return""!=this.username},validUserpassword(){return""!=this.userpassword},login(){var t=this;if(t.validUsername()&&t.validUserpassword()){const e=a("bc3a");e.post("/api/login.php",{username:t.username,userpassword:t.userpassword}).then((function(e){200===e.status&&0!=e.data.user_id?(t.msg=e.data.msg,t.$session.start(),t.$session.set("user_approval",e.data.user_approval),t.$session.set("user_id",e.data.user_id),t.$router.push("/")):t.msg=e.data.msg,setTimeout(()=>{t.msg=""},3e3)})).catch(t=>{console.log(t)})}}}},A=N,M=Object(_["a"])(A,D,T,!1,null,null,null),Y=M.exports,q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"card fullheight overflow-auto shadow"},[e("div",{staticClass:"card-header bg-gradient p-4 pl-4 pr-4 pt-1"},[t._v(" Category Types ")]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},t._l(t.category_types,(function(a,s){return e("div",{key:a.id,staticClass:"col-12 mb-2",attrs:{value:a.id}},[e("button",{staticClass:"btn btn-block btn-outline-dark rounded-0",class:{active:null!==t.selectedCategoryType?a.id==t.selectedCategoryType:0===s},on:{click:function(e){t.selectedCategoryType=a.id,t.fetchCategoriesByTypeId(null!==t.selectedCategoryType?t.selectedCategoryType:a.id),t.searchProd=""}}},[t._v(t._s(a.type_name))])])})),0)])]),e("button",{staticClass:"btn btn-primary text-white btn-block sticky-bottom btn-lg rounded-0",on:{click:function(e){return t.back()}}},[t._m(0)])]),e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"card fullheight-v overflow-auto shadow"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchProd,expression:"searchProd"}],staticClass:"form-control form-control-sm bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"inputProduct",placeholder:"Insert Product"},domProps:{value:t.searchProd},on:{keyup:function(e){return t.searchProduct(e.target.value)},input:function(e){e.target.composing||(t.searchProd=e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"inputProduct"}},[t._v("Insert Product")])])]),e("div",{staticClass:"card-body pt-3"},[""==t.products?e("div",[e("div",{staticClass:"text-danger text-center"},[t._v(" No Records... ")])]):e("div",{staticClass:"row text-center"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"col-md-3 mb-4",attrs:{value:a.id},on:{click:function(e){return t.addOrderProducts(a.id,1,a.stock_qty)}}},[e("v-lazy-image",{staticClass:"res-img shadow-lg border",attrs:{src:t.imgURL+a.product_image,title:a.product_name}}),e("p",{staticClass:"card-text box text-white"},[t._v(" "+t._s(t.trimProductName(a.product_name))+" "),e("br"),t._v(" ("+t._s(a.stock_qty)+") ")])],1)})),0)]),e("div",{staticClass:"card-footer p-1"},[e("div",{staticClass:"container testimonial-group"},[e("div",{staticClass:"row"},[""==t.categories?e("div",{staticClass:"col-xs-12"},[e("div",{staticClass:"text-danger text-center"},[t._v(" No Records... ")])]):t._e(),e("div",{staticClass:"col-xs-1"},t._l(t.categories,(function(a,s){return e("button",{key:a.id,staticClass:"btn btn-sm btn-outline-dark m-1",class:{active:null!==t.selectedCategory?a.id==t.selectedCategory:0===s},on:{click:function(e){t.selectedCategory=a.id,t.fetchProductsbyCategory(null!==t.selectedCategory?t.selectedCategory:a.id)}}},[t._v(t._s(a.category_name))])})),0)])])])])]),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"card fullheight shadow"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product_barcode,expression:"product_barcode"}],ref:"bar",staticClass:"form-control form-control-sm bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"inputBarcode",placeholder:"Insert Barcode"},domProps:{value:t.product_barcode},on:{input:[function(e){e.target.composing||(t.product_barcode=e.target.value)},function(e){return t.SearchProductBarcode(e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"inputBarcode"}},[t._v("Insert Barcode")])])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row overflow-auto",staticStyle:{height:"48vh"}},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped"},[e("tbody",t._l(t.orders,(function(a,s){return e("tr",{key:a.id,attrs:{value:a.id}},[e("td",{staticClass:"pt-2 pb-2 pl-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Click to discount "+a.product_name},on:{click:function(e){return t.addDiscount(a.id)}}},[t._v(t._s(a.product_name))]),e("td",{staticClass:"pt-2 pb-2 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.product_qty,expression:"order.product_qty"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:1,max:a.stock_qty},domProps:{value:a.product_qty},on:{input:[function(e){e.target.composing||t.$set(a,"product_qty",e.target.value)},function(e){t.minInput(e,s),t.updateOrderProduct(a.id,a.product_qty,a.product_id)}]}})]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.total_amount))]),t._v(" "),e("p",{staticClass:"small"},[t._v(t._s(0==a.discount_amount?"":"-₱"+a.discount_amount))])]),e("td",{staticClass:"pt-2 pb-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Delete "+a.product_name},on:{click:function(e){return t.deleteOrderProduct(a.id)}}},[e("i",{staticClass:"fas fa-times-circle"})])])})),0)])])]),e("hr"),e("div",{staticClass:"row",staticStyle:{height:"10vh"}},[e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Vat Sales:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.vatSalesTotal?"":"₱ "+t.vatSalesTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("12% Vat:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.vatTotal?"":"₱ "+t.vatTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Discount Total:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.discountTotal?"":"₱ "+t.discountTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Sub Total:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.orderTotal?"":"₱ "+t.orderTotal))])])])])]),e("button",{staticClass:"btn btn-info btn-block sticky-bottom btn-lg rounded-0",on:{click:function(e){return t.checkOut(t.orderTotal)}}},[t._m(1)])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addDisc"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Discount")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped text-center"},[t._m(2),e("tbody",t._l(t.order_discs,(function(a,s){return e("tr",{key:a.id,attrs:{value:a.id}},[e("td",{staticClass:"pt-2 pb-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Click to discount "+a.product_name}},[t._v(t._s(a.product_name))]),e("td",{staticClass:"pt-2 pb-2 pl-5 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.product_qty,expression:"order_disc.product_qty"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:0,max:a.max_qty},domProps:{value:a.product_qty},on:{input:[function(e){e.target.composing||t.$set(a,"product_qty",e.target.value)},function(e){return t.minDiscQty(e,s)}]}})]),e("td",{staticClass:"pt-2 pb-2 pl-5 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.disc,expression:"disc"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:"0",max:"90"},domProps:{value:t.disc},on:{input:[function(e){e.target.composing||(t.disc=e.target.value)},function(e){return t.minInputDisc(e)}]}})]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.product_qty*a.selling_price/(100/t.disc)))])]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.product_qty*a.selling_price))])]),e("td",{staticClass:"pt-2 align-middle"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.btnDiscount(a.id,a.product_qty*a.selling_price/(100/t.disc))}}},[t._v("Save")])])])})),0)])])])])])])])])},j=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"ml-2"},[e("i",{staticClass:"fas fa-cart-plus"}),t._v(" Checkout")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Qty")]),e("th",[t._v("Discount %")]),e("th",[t._v("Discount Amount")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Action")])])])}],E=(a("e9f5"),a("910d"),a("7d54"),a("8dc2")),I=a.n(E),$={components:{VLazyImage:I.a},data(){return{product_barcode:"",products:[],categories:[],category_types:[],orders:[],order_discs:[],disc:20,show:!1,active:!1,selectedCategory:null,selectedCategoryType:null,catid:void 0,searchProd:"",imgURL:"/grocery/public/images/products/"}},created(){this.focusBarcode(),this.fetchCategoriesByTypeId(),this.fetchCategoryTypes(),this.fetchProductsbyCategory(),this.fetchOrderProducts()},methods:{focusBarcode(){setTimeout(()=>{this.$refs.bar.focus()},1)},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},back(){this.$router.push("/")},trimProductName(t){var e=15,a=t.length>e?t.substring(0,t.length-3)+"...":t;return a},minInputDisc(t){var e=this;const a=parseInt(t.target.value),s=parseInt(t.target.min),o=parseInt(t.target.max);return a<s||Number.isNaN(a)?e.disc=0:e.disc=a>o?o:a},minDiscQty(t,e){var a=this;const s=parseInt(t.target.value),o=parseInt(t.target.min),r=parseInt(t.target.max);return s<o||Number.isNaN(s)?a.order_discs[e].product_qty=0:a.order_discs[e].product_qty=s>r?r:s},minInput(t,e){var a=this;const s=parseInt(t.target.value),o=parseInt(t.target.min),r=parseInt(t.target.max);return s<o||Number.isNaN(s)?a.orders[e].product_qty=0:a.orders[e].product_qty=s>r?r:s},fetchProductsbyCategory(t){var e=this,s="";const o=a("bc3a");s=void 0===t?0:t,e.loading=!0,o.get("/api/getProductsByCategory/?catid="+s).then((function(t){e.products=t.data.data.filter((function(t){return 0!=t.stock_qty})),e.loading=!1})).catch(t=>{console.log(t)})},fetchCategoriesByTypeId(t){var e=this;const s=a("bc3a");s.get("/api/getAllCategoriesByTypeId/?category_status=active&typeid="+t).then((function(t){e.categories=t.data.data})).catch(t=>{console.log(t)})},fetchCategoryTypes(){var t=this;const e=a("bc3a");e.get("/api/getAllCategoryTypes/").then((function(e){t.category_types=e.data.data})).catch(t=>{console.log(t)})},fetchOrderProducts(){var t=this;const e=a("bc3a");e.get("/api/getAllOrderProducts/").then((function(e){console.log(e),t.orders=e.data.data,t.orders=e.data.data.filter((function(t){return null!=t.id}))})).catch(t=>{console.log(t)})},searchCategory(t){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchCategory/?category_name="+t).then((function(t){e.categories=t.data.data})).catch(t=>{console.log(t)})},500)},searchProduct(t){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProductByCategory/?product_name="+t+"&category_id="+e.selectedCategory).then((function(t){e.products=t.data.data.filter((function(t){return 0!=t.stock_qty}))})).catch(t=>{console.log(t)})},500)},addOrderProducts(t,e,s){var o=this;const r=a("bc3a");0!=s&&r.get("/api/addOrderProducts/?id="+t+"&qty="+e+"&user_id="+o.$session.get("user_id")).then(()=>{o.fetchOrderProducts(),o.fetchProductsbyCategory(o.selectedCategory)}).catch(t=>{console.log(t)})},updateOrderProduct(t,e,s){var o=this;const r=a("bc3a");r.put("/api/updateOrderProduct/",{id:t,qty:e,product_id:s}).then(()=>{o.fetchOrderProducts(),o.fetchProductsbyCategory(o.selectedCategory)}).catch(t=>{console.log(t)})},deleteOrderProduct(t){var e=this;const s=a("bc3a");s.delete("/api/deleteOrderProduct/?id="+t).then(()=>{e.fetchOrderProducts(),e.fetchProductsbyCategory(e.selectedCategory)}).catch(t=>{console.log(t)})},addDiscount(t){var e=this;const s=a("bc3a");s.get("/api/getOrderDiscountById/?order_id="+t).then(t=>{console.log(t.data),e.toggleModal(),e.order_discs=t.data.data}).catch(t=>{console.log(t)})},btnDiscount(t,e){var s=this;const o=a("bc3a");o.get("/api/updateOrderDiscountById/?id="+t+"&disc="+e).then(()=>{s.fetchOrderProducts(),s.toggleModal()}).catch(t=>{console.log(t)})},checkOut(t){0!=t?this.$router.push("/terminal/payment"):alert("Please punch some products before clicking checkout")},SearchProductBarcode(t){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProductByBarcode/?barcode="+t+"&qty=1&user_id="+e.$session.get("user_id")).then(()=>{e.fetchOrderProducts(),e.fetchProductsbyCategory(e.selectedCategory),e.product_barcode=""}).catch(t=>{console.log(t)})},500)}},computed:{orderTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.total_amount)}),(t-this.discountTotal).toFixed(2)},vatTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.vat_amount)}),t.toFixed(2)},discountTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.discount_amount)}),t.toFixed(2)},vatSalesTotal:function(){return(this.orderTotal-this.vatTotal-this.discountTotal).toFixed(2)}}},O=$,B=Object(_["a"])(O,q,j,!1,null,null,null),F=B.exports,R=(a("ab43"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"card fullheight overflow-auto rounded-0"},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"pay-by"}},[t._v("Pay By:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.payment.payment_typeid,expression:"payment.payment_typeid"}],staticClass:"form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"pay-by"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.payment,"payment_typeid",e.target.multiple?a:a[0])}}},t._l(t.payments,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.payment_name))])})),0)])]),e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"customer"}},[t._v("Customer:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.payment.customer_id,expression:"payment.customer_id"}],staticClass:"form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"customer"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.payment,"customer_id",e.target.multiple?a:a[0])}}},t._l(t.customers,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.customer_name))])})),0)])]),e("div",{staticClass:"row mb-4"},[e("div",{staticClass:"col-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"comment"}},[t._v("Comment:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.payment.sales_comment,expression:"payment.sales_comment"}],staticClass:"form-control form-control-sm rounded-0",attrs:{id:"comment",cols:"30",rows:"9",placeholder:"Optional"},domProps:{value:t.payment.sales_comment},on:{input:function(e){e.target.composing||t.$set(t.payment,"sales_comment",e.target.value)}}})])])])]),e("button",{staticClass:"btn btn-primary text-white btn-block sticky-bottom btn-lg rounded-0",on:{click:function(e){return t.back()}}},[t._m(1)])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"card fullheight overflow-auto rounded-0"},[t._m(2),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row overflow-auto",staticStyle:{height:"48vh"}},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped"},[e("tbody",t._l(t.orders,(function(a,s){return e("tr",{key:a.id,attrs:{value:a.id}},[e("td",{staticClass:"pt-2 pb-2 pl-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Click to discount "+a.product_name},on:{click:function(e){return t.addDiscount(a.id)}}},[t._v(t._s(a.product_name))]),e("td",{staticClass:"pt-2 pb-2 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.product_qty,expression:"order.product_qty"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:1,max:a.stock_qty},domProps:{value:a.product_qty},on:{input:[function(e){e.target.composing||t.$set(a,"product_qty",e.target.value)},function(e){t.minInput(e,s),t.updateOrderProduct(a.id,a.product_qty,a.product_id)}]}})]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.total_amount))]),t._v(" "),e("p",{staticClass:"small"},[t._v(t._s(0==a.discount_amount?"":"-₱"+a.discount_amount))])]),e("td",{staticClass:"pt-2 pb-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Delete "+a.product_name},on:{click:function(e){return t.deleteOrderProduct(a.id)}}},[e("i",{staticClass:"fas fa-times-circle"})])])})),0)])])]),e("hr"),e("div",{staticClass:"row",staticStyle:{height:"10vh"}},[e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Vat Sales:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.vatSalesTotal?"":"₱ "+t.vatSalesTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("12% Vat:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.vatTotal?"":"₱ "+t.vatTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Discount Total:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.discountTotal?"":"₱ "+t.discountTotal))])]),e("div",{staticClass:"col-12"},[e("span",{staticClass:"float-left ml-2 font-weight-bold"},[t._v("Sub Total:")]),e("span",{staticClass:"float-right mr-3 font-weight-bold"},[t._v(t._s(0==t.subTotal?"":"₱ "+t.subTotal))])])])])])]),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"card fullheight"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tendered,expression:"tendered"}],staticClass:"form-control form-control-lg",attrs:{type:"text",disabled:""},domProps:{value:t.tendered},on:{input:function(e){e.target.composing||(t.tendered=e.target.value)}}}),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-info border btn-block p-3",on:{click:function(e){return t.key(20)}}},[t._v("₱ 20")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-info border btn-block p-3",on:{click:function(e){return t.key(100)}}},[t._v("₱ 100")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-info border btn-block p-3",on:{click:function(e){return t.key(500)}}},[t._v("₱ 500")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-info border btn-block p-3",on:{click:function(e){return t.key(1e3)}}},[t._v("₱ 1000")])])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(7)}}},[t._v("7")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(8)}}},[t._v("8")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(9)}}},[t._v("9")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-danger border btn-block p-5",on:{click:function(e){return t.clear(t.tendered)}}},[t._v("←")])])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(4)}}},[t._v("4")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(5)}}},[t._v("5")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(6)}}},[t._v("6")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-danger border btn-block p-5",on:{click:t.clearAll}},[t._v("C")])])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(1)}}},[t._v("1")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(2)}}},[t._v("2")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(3)}}},[t._v("3")])]),e("div",{staticClass:"col-sm-3"},[e("button",{staticClass:"btn btn-lg btn-dark border btn-block p-5",on:{click:function(e){return t.key(0)}}},[t._v("0")])])]),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-sm-12"},[e("button",{staticClass:"btn btn-lg btn-success border btn-block p-4",attrs:{value:"0"},on:{click:t.btnTendered}},[t._v("Tender")])])])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addDisc"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Discount")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped text-center"},[t._m(3),e("tbody",t._l(t.order_discs,(function(a,s){return e("tr",{key:a.id,attrs:{value:a.id}},[e("td",{staticClass:"pt-2 pb-2 align-middle",staticStyle:{cursor:"pointer"},attrs:{title:"Click to discount "+a.product_name}},[t._v(t._s(a.product_name))]),e("td",{staticClass:"pt-2 pb-2 pl-5 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.product_qty,expression:"order_disc.product_qty"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:0,max:a.max_qty},domProps:{value:a.product_qty},on:{input:[function(e){e.target.composing||t.$set(a,"product_qty",e.target.value)},function(e){return t.minDiscQty(e,s)}]}})]),e("td",{staticClass:"pt-2 pb-2 pl-5 align-middle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.disc,expression:"disc"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",staticStyle:{width:"40px"},attrs:{type:"text",min:"0",max:"90"},domProps:{value:t.disc},on:{input:[function(e){e.target.composing||(t.disc=e.target.value)},function(e){return t.minInputDisc(e)}]}})]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.product_qty*a.selling_price/(100/t.disc)))])]),e("td",{staticClass:"pt-2 align-middle"},[e("b",[t._v("₱ "+t._s(a.product_qty*a.selling_price))])]),e("td",{staticClass:"pt-2 align-middle"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(e){t.btnDiscount(a.id,a.product_qty*a.selling_price/(100/t.disc))}}},[t._v("Save")])])])})),0)])])])])])])])])}),U=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header bg-gradient"},[e("h5",[t._v("Payment Setup")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header bg-gradient"},[e("h5",[t._v("Order Summary")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Qty")]),e("th",[t._v("Discount %")]),e("th",[t._v("Discount Amount")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Action")])])])}],L={data(){return{orders:[],order_discs:[],disc:20,payment:{payment_typeid:1,customer_id:1,sales_comment:""},payments:[],customers:[],tendered:0,show:!1,active:!1}},created(){this.fetchOrderProducts(),this.fetchPaymentTypes(),this.fetchCustomers()},methods:{minInputDisc(t){var e=this;const a=parseInt(t.target.value),s=parseInt(t.target.min),o=parseInt(t.target.max);return a<s||Number.isNaN(a)?e.disc=0:e.disc=a>o?o:a},minDiscQty(t,e){var a=this;const s=parseInt(t.target.value),o=parseInt(t.target.min),r=parseInt(t.target.max);return s<o||Number.isNaN(s)?a.order_discs[e].product_qty=0:a.order_discs[e].product_qty=s>r?r:s},minInput(t,e){var a=this;const s=parseInt(t.target.value),o=parseInt(t.target.min),r=parseInt(t.target.max);return s<o||Number.isNaN(s)?a.orders[e].product_qty=0:a.orders[e].product_qty=s>r?r:s},back(){this.$router.push("/terminal")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},key(t){return 0==t?this.tendered=Number(this.tendered)+Number(t)+"0":t>=20?this.tendered+=Number(t):this.tendered=Number(this.tendered)+String(t)},clear(t){return this.tendered=t>1?String(t).substr(0,String(t).length-1):Number(0)},clearAll(){return this.tendered=0},fetchOrderProducts(){var t=this;const e=a("bc3a");e.get("/api/getAllOrderProducts/").then((function(e){t.orders=e.data.data})).catch(t=>{console.log(t)})},fetchPaymentTypes(){var t=this;const e=a("bc3a");e.get("/api/getAllPaymentTypes/").then((function(e){t.payments=e.data.data})).catch(t=>{console.log(t)})},fetchCustomers(){var t=this;const e=a("bc3a");e.get("/api/getAllCustomers/?customer_status=active").then((function(e){t.customers=e.data.data})).catch(t=>{console.log(t)})},updateOrderProduct(t,e,s){var o=this;const r=a("bc3a");r.put("/api/updateOrderProduct/",{id:t,qty:e,product_id:s}).then(()=>{o.fetchOrderProducts(),o.fetchProductsbyCategory(o.selectedCategory)}).catch(t=>{console.log(t)})},deleteOrderProduct(t){var e=this;const s=a("bc3a");s.delete("/api/deleteOrderProduct/?id="+t).then(()=>{e.fetchOrderProducts(),e.fetchProductsbyCategory(e.selectedCategory)}).catch(t=>{console.log(t)})},addDiscount(t){var e=this;const s=a("bc3a");s.get("/api/getOrderDiscountById/?order_id="+t).then(t=>{e.toggleModal(),e.order_discs=t.data.data}).catch(t=>{console.log(t)})},btnDiscount(t,e){var s=this;const o=a("bc3a");o.get("/api/updateOrderDiscountById/?id="+t+"&disc="+e).then(()=>{s.fetchOrderProducts(),s.toggleModal()}).catch(t=>{console.log(t)})},btnTendered(){let t=this;if(0!=t.tendered&&0!=t.orderTotal&&Number(t.tendered)>Number(t.subTotal)){var e=[];e={cashier_id:t.$session.get("user_id"),order_id:t.orderId,total_amount:t.orderTotal,tendered:t.tendered,change_amount:t.changeAmount,discount_amount:t.discountTotal,vat_amount:t.vatTotal};var s=[{...t.payment,...e}];const o=a("bc3a");o.post("/api/addSales/",s).then(()=>{t.$router.push({name:"CHANGE",params:{change:t.changeAmount,order_id:t.orderId}})}).catch(t=>{console.log(t)})}else alert("Please check tendered amount")}},computed:{orderId:function(){var t=0;return this.orders.forEach(e=>{t=e.order_id}),t},orderTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.total_amount)}),t.toFixed(2)},subTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.total_amount)}),(t-this.discountTotal).toFixed(2)},vatTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.vat_amount)}),t.toFixed(2)},discountTotal:function(){var t=0;return this.orders.forEach(e=>{t+=parseFloat(e.discount_amount)}),t.toFixed(2)},vatSalesTotal:function(){return(this.orderTotal-this.vatTotal-this.discountTotal).toFixed(2)},changeAmount:function(){return(this.tendered-this.subTotal).toFixed(2)}}},z=L,Q=Object(_["a"])(z,R,U,!1,null,null,null),H=Q.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5"},[e("div",{staticClass:"form-label-group"},[e("input",{staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"searchProduct",placeholder:"Search Product"},on:{keyup:function(e){return t.searchProduct(e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"searchProduct"}},[t._v("Search Product")])])]),e("div",{staticClass:"col-1 offset-6 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Products"},on:{click:function(e){t.toggleModal(),t.edit=!1,t.flush()}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("form",{attrs:{method:"POST",enctype:"multipart/form-data"}},[e("table",{staticClass:"table text-center"},[t._m(0),t.loading?e("tbody",[t._m(1)]):e("tbody",[t.products.length?t._l(t.products,(function(a,s){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[e("label",{staticClass:"border m-0",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Upload Photo",for:"file"+s}},[e("input",{ref:"file",refInFor:!0,staticClass:"form-control-file",attrs:{type:"file",id:"file"+s,hidden:""},on:{change:function(e){return t.createImage(a.id,s)}}}),e("img",{staticClass:"res-img shadow border",staticStyle:{width:"80px",height:"50px"},attrs:{src:t.imgURL+a.product_image}})])]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product_name))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.unit_price))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.selling_price))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.product_status))]),e("td",{staticClass:"align-middle"},[e("img",{staticClass:"res-img",staticStyle:{width:"100px",height:"30px"},attrs:{src:t.imgBarcode+"/"+a.id+".png"}})]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.alarmlvl))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"fa fa-edit mr-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Edit "+a.product_name},on:{click:function(e){return t.editProduct(a)}}}),e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+a.product_name},on:{click:function(e){return t.deleteProduct(a.id,a.product_name)}}})])])})):e("tr",[t._m(2)])],2)])]),e("hr"),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(3)])]),e("div",{staticClass:"col-6"},[e("nav",{attrs:{"aria-label":"Page navigation example item-bottom"}},[e("ul",{staticClass:"pagination pagination-sm justify-content-end"},[e("li",{staticClass:"page-item",class:[{disabled:1==t.pagination.current_page||""==t.pagination}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchProducts(t.page=t.page-1)}}},[t._v(" Prev ")])]),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link text-dark"},[t._v("Page "+t._s(t.pagination.current_page)+" of "+t._s(t.pagination.last_page))])]),e("li",{staticClass:"page-item",class:[{disabled:t.pagination.current_page==t.pagination.last_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchProducts(t.page=t.page+1)}}},[t._v(" Next ")])])])])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addProduct"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Product")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.product_name,expression:"product.product_name"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"prodname",placeholder:"Product Name"},domProps:{value:t.product.product_name},on:{input:function(e){e.target.composing||t.$set(t.product,"product_name",e.target.value)}}}),e("label",{attrs:{for:"prodname"}},[t._v("Product Name")])]),t.errors.product_name?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.product_name))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.category_id,expression:"product.category_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"catid"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"category_id",e.target.multiple?a:a[0])}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Category")]),t._l(t.categories,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.category_name))])}))],2),t.errors.category_id?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.category_id))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.unit_price,expression:"product.unit_price"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",min:"1",id:"uprice",placeholder:"Unit Price"},domProps:{value:t.product.unit_price},on:{input:function(e){e.target.composing||t.$set(t.product,"unit_price",e.target.value)}}}),e("label",{attrs:{for:"uprice"}},[t._v("Unit Price")])]),t.errors.unit_price?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.unit_price))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.selling_price,expression:"product.selling_price"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",min:"1",id:"sprice",placeholder:"Selling Price"},domProps:{value:t.product.selling_price},on:{input:function(e){e.target.composing||t.$set(t.product,"selling_price",e.target.value)}}}),e("label",{attrs:{for:"sprice"}},[t._v("Selling Price")])]),t.errors.selling_price?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.selling_price))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.product_status,expression:"product.product_status"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"catid"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.product,"product_status",e.target.multiple?a:a[0])}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Status")]),e("option",{attrs:{value:"1"}},[t._v("Active")]),e("option",{attrs:{value:"2"}},[t._v("Inactive")])]),t.errors.product_status?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.product_status))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.alarmlvl,expression:"product.alarmlvl"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",min:"1",id:"alarm",placeholder:"Alarm Level"},domProps:{value:t.product.alarmlvl},on:{input:function(e){e.target.composing||t.$set(t.product,"alarmlvl",e.target.value)}}}),e("label",{attrs:{for:"alarm"}},[t._v("Alarm Level")])])]),e("div",{staticClass:"col-12"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product.barcode,expression:"product.barcode"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"bcode",placeholder:"Barcode"},domProps:{value:t.product.barcode},on:{input:function(e){e.target.composing||t.$set(t.product,"barcode",e.target.value)}}}),e("label",{attrs:{for:"bcode"}},[t._v("Barcode")])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addProduct}},[t._v("Save changes")])])])])])])},G=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Image")]),e("th",[t._v("Product Name")]),e("th",[t._v("Unit Price")]),e("th",[t._v("Selling Price")]),e("th",[t._v("Category")]),e("th",[t._v("Status")]),e("th",[t._v("Barcode")]),e("th",[t._v("Alarm Level")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"9"}},[e("img",{attrs:{src:"/grocery/public/images/loading.gif",alt:""}})])])},function(){var t=this,e=t._self._c;return e("td",{attrs:{colspan:"9"}},[e("strong",{staticClass:"text-danger text-center"},[t._v("No Record")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])}],X={data(){return{products:[],categories:[],product:{product_name:"",category_id:0,product_status:0,unit_price:"",selling_price:"",product_image:""},active:!1,show:!1,pagination:[],edit:!1,errors:[],loading:!1,file:"",page:1,msg:null,imgURL:"/grocery/public/images/products/",imgBarcode:"/grocery/public/images/barcode/"}},created(){this.fetchProducts(),this.fetchCategories()},computed:{validProductName:function(){return this.product.product_name.length<=1},validCategory:function(){return 0==this.product.category_id},validUnitPrice:function(){return 0==this.product.unit_price||""==this.product.unit_price},validSellingPrice:function(){return 0==this.product.selling_price||""==this.product.selling_price},validStatus:function(){return 0==this.product.product_status}},methods:{back(){this.$router.push("/")},flush(){this.product={product_name:"",category_id:0,product_status:0,unit_price:"",selling_price:"",product_image:""}},createImage(t,e){var s=this;const o=a("bc3a");s.file=s.$refs.file[e].files[0];let r=s.file.name.split("."),i=t,l=r[1],c=i+"."+l;var n=new FormData;n.append("file",s.file,c),o.post("/api/uploadProductImage/",n,{header:{"Content-Type":"multipart/form-data"}}).then((function(){window.location.reload(!0)})).catch(t=>{console.log(t)})},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},fetchProducts(t){var e=this;const s=a("bc3a");e.loading=!0,s.get("/api/getAllProducts/?page="+t).then((function(t){e.products=t.data.data,e.pagination=t.data.pagination,e.loading=!1})).catch(t=>{console.log(t)})},fetchCategories(){var t=this;const e=a("bc3a");e.get("/api/getAllCategories/?page=&status=active").then((function(e){t.categories=e.data.data})).catch(t=>{console.log(t)})},searchProduct(t){var e=this;const s=a("bc3a");e.loading=!0,e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProduct/?product_name="+t).then((function(t){e.products=t.data.data,e.pagination=t.data.pagination,e.loading=!1})).catch(t=>{console.log(t)})},500)},addProduct(){var t=this;if(t.errors=[],t.validProductName&&(t.errors.product_name="Please input Product Name."),t.validCategory&&(t.errors.category_id="Please Select Category."),t.validUnitPrice&&(t.errors.unit_price="Please input Unit Price greater 0."),t.validSellingPrice&&(t.errors.selling_price="Please input Selling Price greater 0."),t.validStatus&&(t.errors.product_status="Please Select Product Status."),!t.validProductName&&!t.validCategory&&!t.validUnitPrice&&!t.validSellingPrice&&!t.validStatus){const e=a("bc3a");0==t.edit?e.post("/api/addProducts/",t.product).then((function(e){t.msg=e.data.msg,setTimeout(()=>{t.msg=null},2e3),t.fetchProducts(t.page)})).catch(t=>{console.log(t)}):e.put("/api/updateProduct/",t.product).then(e=>{t.msg=e.data.msg,t.edit=!1,setTimeout(()=>{t.msg=null},2e3),t.fetchProducts(t.page)}).catch(t=>{console.log(t)})}},editProduct(t){let e=this;e.toggleModal(),e.edit=!0,e.product.id=t.id,e.product.product_name=t.product_name,e.product.unit_price=t.unit_price,e.product.selling_price=t.selling_price,e.product.product_status="active"==t.product_status?1:2,e.product.product_alarmlvl=t.product_alarmlvl,e.product.category_id=t.category_id,e.product.barcode=t.barcode},deleteProduct(t,e){if(!confirm("Do you wat to delete "+e))return!1;{const e=a("bc3a");e.put("/api/deleteProduct/",{id:t}).then(()=>{this.fetchProducts(this.page)}).catch(t=>{console.log(t)})}}}},W=X,J=Object(_["a"])(W,V,G,!1,null,null,null),Z=J.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5"},[e("div",{staticClass:"form-label-group"},[e("input",{staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"searchCategory",placeholder:"Search Product"},on:{keyup:function(e){return t.searchCategory(e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"searchCategory"}},[t._v("Search Category")])])]),e("div",{staticClass:"col-1 offset-6 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Categories"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("form",{attrs:{method:"POST",enctype:"multipart/form-data"}},[e("table",{staticClass:"table table-striped"},[t._m(0),""==t.categories?e("tbody",[t._m(1)]):e("tbody",t._l(t.categories,(function(a){return e("tr",{key:a.id,staticClass:"text-center"},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.type_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_status))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"fa fa-edit mr-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Edit "+a.category_name},on:{click:function(e){return t.editCategory(a)}}}),e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+a.category_name},on:{click:function(e){return t.deleteCategory(a.id,a.category_name)}}})])])})),0)])]),e("hr"),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])]),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(2)])]),e("div",{staticClass:"col-6"},[e("nav",{attrs:{"aria-label":"Page navigation example item-bottom"}},[e("ul",{staticClass:"pagination pagination-sm justify-content-end"},[e("li",{staticClass:"page-item",class:[{disabled:1==t.pagination.current_page}||""==t.pagination],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchCategories(t.page=t.page-1)}}},[t._v(" Prev ")])]),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link text-dark"},[t._v("Page "+t._s(t.pagination.current_page)+" of "+t._s(t.pagination.last_page))])]),e("li",{staticClass:"page-item",class:[{disabled:t.pagination.current_page==t.pagination.last_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchCategories(t.page=t.page+1)}}},[t._v(" Next ")])])])])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addCategory"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Category")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.category.category_name,expression:"category.category_name"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"prodname",placeholder:"Category Name"},domProps:{value:t.category.category_name},on:{input:function(e){e.target.composing||t.$set(t.category,"category_name",e.target.value)}}}),e("label",{attrs:{for:"prodname"}},[t._v("Category Name")])]),t.errors.category_name?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.category_name))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category.category_type,expression:"category.category_type"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"catid"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.category,"category_type",e.target.multiple?a:a[0])}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Category Type")]),t._l(t.category_types,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.type_name))])}))],2),t.errors.type_id?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.type_id))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category.category_status,expression:"category.category_status"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"catid"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.category,"category_status",e.target.multiple?a:a[0])}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Status")]),e("option",{attrs:{value:"1"}},[t._v("Active")]),e("option",{attrs:{value:"2"}},[t._v("Inactive")])]),t.errors.category_status?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.category_status))]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addCategory}},[t._v("Save changes")])])])])])])},tt=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",[t._v("Category Name")]),e("th",[t._v("Category Type")]),e("th",[t._v("Status")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",{staticClass:"text-center"},[e("td",{attrs:{colspan:"9"}},[e("p",{staticClass:"text-danger text-center"},[t._v("No Records...")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])}],et={data(){return{categories:[],category_types:[],category:{category_name:"",category_type:0,category_status:0},active:!1,show:!1,pagination:[],edit:!1,errors:[],page:1,msg:null}},created(){this.fetchCategories(this.page),this.fetchCategoryTypes()},computed:{validCategoryName:function(){return this.category.category_name.length<=1},validCategoryType:function(){return 0==this.category.type_id},validStatus:function(){return 0==this.category.category_status}},methods:{back(){this.$router.push("/")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},fetchCategories(t){var e=this;const s=a("bc3a");s.get("/api/getAllCategories/?page="+t+"&status=").then((function(t){e.categories=t.data.data,e.pagination=t.data.pagination})).catch(t=>{console.log(t)})},fetchCategoryTypes(){var t=this;const e=a("bc3a");e.get("/api/getAllCategoryTypes/").then((function(e){t.category_types=e.data.data})).catch(t=>{console.log(t)})},searchCategory(t){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchCategory/?page="+e.page+"&category_name="+t).then((function(t){e.categories=t.data.data,e.pagination=t.data.pagination})).catch(t=>{console.log(t)})},500)},addCategory(){var t=this;if(t.errors=[],t.validCategoryName&&(t.errors.category_name="Please input Category Name."),t.validCategoryType&&(t.errors.category_type="Please Select Category Type."),t.validStatus&&(t.errors.category_status="Please Select Category Status."),!t.validCategoryName&&!t.validCategoryType&&!t.validStatus){const e=a("bc3a");0==t.edit?e.post("/api/addCategory/",t.category).then((function(e){t.msg=e.data.msg,setTimeout(()=>{t.msg=null},2e3),t.fetchCategories(t.page),t.toggleModal(),t.category={category_name:"",category_type:0,category_status:0}})).catch(t=>{console.log(t)}):e.put("/api/updateCategory/",t.category).then(e=>{t.msg=e.data.msg,t.edit=!1,setTimeout(()=>{t.msg=null},2e3),t.fetchCategories(t.page),t.toggleModal(),t.category={category_name:"",category_type:0,category_status:0}}).catch(t=>{console.log(t)})}},editCategory(t){let e=this;e.toggleModal(),e.edit=!0,e.category.id=t.id,e.category.category_name=t.category_name,e.category.category_type=t.category_type,e.category.category_status="active"==t.category_status?1:2},deleteCategory(t,e){if(!confirm("Do you wat to delete "+e))return!1;{const e=a("bc3a");e.put("/api/deleteCategory/",{id:t}).then(()=>{this.fetchCategories(this.page)}).catch(t=>{console.log(t)})}}}},at=et,st=Object(_["a"])(at,K,tt,!1,null,null,null),ot=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:[function(e){e.target.composing||(t.from_date=e.target.value)},t.searchPurchaseByDate]}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:[function(e){e.target.composing||(t.to_date=e.target.value)},t.searchPurchaseByDate]}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])]),e("div",{staticClass:"col-1 offset-5 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Purchase"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped text-center"},[t._m(0),e("tbody",t._l(t.purchases,(function(a){return e("tr",{key:a.id,class:{"bg-warning":1==a.iscancel}},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.id))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.supplier_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.employee_fn)+" "+t._s(a.employee_sn))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.drnum))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.purchase_note))]),e("td",{staticClass:"align-middle"},[t._v(t._s(t.purchaseDtFormat(a.created_at)))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"far fa-file",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openPortal(a.id)}}})]),e("td",{staticClass:"align-middle"},[1!=a.iscancel?e("i",{staticClass:"fas fa-ban ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Cancel "+a.id},on:{click:function(e){return t.cancelPurchase(a.id)}}}):e("i",{staticClass:"fas fa-ban ml-2"})])])})),0)])])]),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(1)])]),e("div",{staticClass:"col-6"},[e("nav",{attrs:{"aria-label":"Page navigation example item-bottom"}},[e("ul",{staticClass:"pagination pagination-sm justify-content-end"},[e("li",{staticClass:"page-item",class:[{disabled:1==t.pagination.current_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchPurchases(t.page=t.page-1)}}},[t._v(" Prev ")])]),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link text-dark"},[t._v("Page "+t._s(t.pagination.current_page)+" of "+t._s(t.pagination.last_page))])]),e("li",{staticClass:"page-item",class:[{disabled:t.pagination.current_page==t.pagination.last_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchPurchases(t.page=t.page+1)}}},[t._v(" Next ")])])])])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addPurchase"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Purchase")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.purchase.created_at,expression:"purchase.created_at"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"created_at",placeholder:"Date"},domProps:{value:t.purchase.created_at},on:{input:function(e){e.target.composing||t.$set(t.purchase,"created_at",e.target.value)}}}),e("label",{attrs:{for:"created_at"}},[t._v("Date")])]),t.errors.created_at?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.created_at))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.purchase.drnum,expression:"purchase.drnum"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"drnum",placeholder:"Delivery Reciept#"},domProps:{value:t.purchase.drnum},on:{input:function(e){e.target.composing||t.$set(t.purchase,"drnum",e.target.value)}}}),e("label",{attrs:{for:"drnum"}},[t._v("Delivery Reciept#")])]),t.errors.drnum?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.drnum))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.purchase.supplier_id,expression:"purchase.supplier_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"supplier_id"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.purchase,"supplier_id",e.target.multiple?a:a[0])}}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Supplier")]),t._l(t.suppliers,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.supplier_name))])}))],2),t.errors.supplier_id?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_id))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.purchase.purchase_note,expression:"purchase.purchase_note"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"purchase_note",placeholder:"Note (Optional)"},domProps:{value:t.purchase.purchase_note},on:{input:function(e){e.target.composing||t.$set(t.purchase,"purchase_note",e.target.value)}}}),e("label",{attrs:{for:"purchase_note"}},[t._v("Note (Optional)")])]),t.errors.note?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.note))]):t._e()]),e("hr"),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.purchase_product.search_product,expression:"purchase_product.search_product"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"search_product",placeholder:"Search Product"},domProps:{value:t.purchase_product.search_product},on:{input:[function(e){e.target.composing||t.$set(t.purchase_product,"search_product",e.target.value)},function(e){return t.fetchProducts(e.target.value)}]}}),e("label",{attrs:{for:"search_product"}},[t._v("Search Product")])]),t.errors.search_product?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.search_product))]):t._e()]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.purchase_product.product_id,expression:"purchase_product.product_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"product_id"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.purchase_product,"product_id",e.target.multiple?a:a[0])},function(e){return t.fetchProductById()}]}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Product")]),t._l(t.products,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.product_name))])}))],2),t.errors.product_id?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.product_id))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.purchase_product.purchase_qty,expression:"purchase_product.purchase_qty"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",id:"purchase_qty",min:"1",placeholder:"Quantity"},domProps:{value:t.purchase_product.purchase_qty},on:{input:function(e){e.target.composing||t.$set(t.purchase_product,"purchase_qty",e.target.value)}}}),e("label",{attrs:{for:"purchase_qty"}},[t._v("Quantity")])]),t.errors.purchase_qty?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.purchase_qty))]):t._e()]),e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-info btn-block item-bottom btn-sm rounded-0 mb-3",on:{click:t.addQueue}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ADD")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table text-center"},[t._m(2),e("tbody",[t._l(t.dups,(function(a,s){return e("tr",{key:a.product_id},[e("td",[t._v(t._s(t.dups[s].product_name))]),e("td",[t._v(t._s(t.dups[s].purchase_qty))]),e("td",[t._v("₱ "+t._s(t.dups[s].unit_price))]),e("td",[t._v("₱ "+t._s(parseFloat(t.dups[s].purchase_qty*t.dups[s].unit_price).toFixed(2)))]),e("td",[e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+t.dups[s].product_name},on:{click:function(e){return t.deleteQueue(s)}}})])])})),t._m(3),e("tr",[e("td",{attrs:{colspan:"2"}}),e("td",{staticClass:"float-right"},[t._v(t._s(0==t.purchaseTotal?"":"Total: "))]),e("td",[t._v(t._s(0==t.purchaseTotal?"":"₱ "+t.purchaseTotal))]),e("td")])],2)])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addPurchase}},[t._v("Save changes")])])])])])])},it=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Supplier")]),e("th",[t._v("Cashier")]),e("th",[t._v("Delivery Reciept#")]),e("th",[t._v("Note")]),e("th",[t._v("Date")]),e("th",[t._v("Purchase Product")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Unit Price")]),e("th",[t._v("Total")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"5"}},[e("hr")])])}],lt={data(){return{msg:"",show:!1,active:!1,edit:!1,errors:[],pagination:[],purchases:[],products:[],suppliers:[],queue_purchase:[],dups:[],purchase:{supplier_id:0,drnum:"",cashier_id:this.$session.get("user_id"),created_at:new Date,purchase_note:""},from_date:new Date,to_date:new Date,purchase_product:{product_id:0,product_name:"",purchase_qty:1,unit_price:0},page:1}},created(){this.purchase.created_at=u()().format("YYYY-MM-DDTkk:mm"),this.from_date=u()().startOf("month").format("YYYY-MM-DDThh:mm"),this.to_date=u()().endOf("month").format("YYYY-MM-DDTkk:mm"),this.searchPurchaseByDate(),this.fetchProducts(),this.fetchSuppliers(),this.fetchPurchases()},computed:{purchaseTotal:function(){var t=0;return this.dups.forEach(e=>{t+=parseFloat(e.purchase_qty*e.unit_price)}),t.toFixed(2)},validDr:function(){return this.purchase.drnum.length<=1},validSupplier:function(){return 0==this.purchase.supplier_id}},methods:{back(){this.$router.push("/")},purchaseDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},openPortal(t){let e=this.$router.resolve({name:"PURCHASE PRODUCTS",query:{purchase_id:t}});window.open(e.href,"_blank","height=500,width=800")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},fetchProducts(t=""){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProduct/?product_name="+t+"&limit=all").then((function(t){e.products=t.data.data})).catch(t=>{console.log(t)})},500)},fetchSuppliers(){var t=this;const e=a("bc3a");e.get("/api/getAllSuppliers/").then((function(e){t.suppliers=e.data.data})).catch(t=>{console.log(t)})},fetchPurchases(t){var e=this;const s=a("bc3a");s.get("/api/getAllPurchases/?page="+t).then((function(t){e.purchases=t.data.data,e.pagination=t.data.pagination})).catch(t=>{console.log(t)})},fetchProductById(){var t=this;const e=a("bc3a");e.get("/api/getAllProductsById/?product_id="+t.purchase_product.product_id).then((function(e){const a=e.data.data;a.forEach(e=>{t.purchase_product.product_name=e.product_name,t.purchase_product.unit_price=e.unit_price})})).catch(t=>{console.log(t)})},searchPurchaseByDate(){var t=this;const e=a("bc3a");var s=u()(t.from_date).format("YYYY-MM-DD HH:mm:ss"),o=u()(t.to_date).format("YYYY-MM-DD HH:mm:ss");e.get("/api/getPurchaseByDate/?from_date="+s+"&to_date="+o).then((function(e){t.purchases=e.data.data})).catch(t=>{console.log(t)})},addPurchase(){var t=this;if(t.errors=[],t.validSupplier&&(t.errors.supplier_id="Please Select Supplier."),t.validDr&&(t.errors.drnum="Please Input Delivery Reciept #."),!t.validSupplier&&!t.validDr){var e=new Array({purchase:this.purchase,purchase_product:this.dups});const s=a("bc3a");s.post("/api/addPurchase/",e).then((function(e){e.data&&(t.purchase={supplier_id:0,drnum:"",cashier_id:t.$session.get("user_id"),created_at:u()().format("YYYY-MM-DDTkk:mm"),purchase_note:""},t.purchase_product={product_id:0,search_product:"",product_name:"",purchase_qty:1,unit_price:0},t.dups=[],t.toggleModal(),t.fetchPurchases(t.page))})).catch(t=>{console.log(t)})}},cancelPurchase(t){var e=this;const s=a("bc3a");confirm("Do you want to cancel purchase ID# "+t)&&s.get("/api/cancelPurchaseById/?purchase_id="+t).then((function(){e.fetchPurchases()})).catch(t=>{console.log(t)})},addQueue(){var t=this;0!=t.purchase_product.product_id&&t.queue_purchase.push({...this.purchase_product}),t.queue_purchase.filter((function(e,a){a===t.queue_purchase.length-1&&-1==t.dups.map((function(t){return t.product_id})).indexOf(e.product_id)&&t.dups.push({product_id:e.product_id,product_name:e.product_name,purchase_qty:e.purchase_qty,unit_price:e.unit_price})}))},deleteQueue(t){this.dups.splice(t,1)}}},ct=lt,nt=Object(_["a"])(ct,rt,it,!1,null,null,null),dt=nt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[t._m(0),t._l(t.purchases,(function(a){return e("div",{key:a.id,staticClass:"row mx-auto"},[1==a.iscancel?e("img",{staticStyle:{position:"absolute",width:"600px","z-index":"10"},attrs:{src:t.imgURL+"cancelled.png"}}):t._e(),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Supplier:")]),t._v(" "+t._s(a.supplier_name))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Date:")]),t._v(" "+t._s(t.purchaseDtFormat(a.created_at)))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Delivery Reciept:")]),t._v(" "+t._s(a.drnum))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Cashier:")]),t._v(" "+t._s(a.employee_fn)+" "+t._s(a.employee_sn))])])})),e("br"),e("br"),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",[t._l(t.purchase_products,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[t._v(t._s(a.product_name))]),e("td",[t._v(t._s(a.purchase_qty))]),e("td",[t._v("₱ "+t._s(a.total_amount))])])})),e("tr",[e("td",{staticClass:"text-right font-weight-bold pr-3",attrs:{colspan:"2"}},[t._v("Total:")]),e("td",[t._v("₱ "+t._s(t.totalPurchase))])])],2)])])]),t._m(2),t._m(3)],2)},pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("h5",[t._v("Cabanatuan City, Nueva Ecija")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Amount")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-4"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],mt={data(){return{msg:"",errors:[],purchase_products:[],purchases:[],imgURL:"/grocery/public/images/"}},created(){this.fetchPurchaseProducts(),this.fetchPurchases()},computed:{totalPurchase:function(){var t=0;return this.purchase_products.forEach(e=>{t+=parseFloat(e.total_amount)}),t.toFixed(2)}},methods:{purchaseDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},fetchPurchaseProducts(){var t=this;const e=a("bc3a");e.get("/api/getAllPurchaseProductsById/?purchase_id="+t.$route.query.purchase_id).then((function(e){t.purchase_products=e.data.data})).catch(t=>{console.log(t)})},fetchPurchases(){var t=this;const e=a("bc3a");e.get("/api/getAllPurchasesById/?purchase_id="+t.$route.query.purchase_id).then((function(e){t.purchases=e.data.data})).catch(t=>{console.log(t)})}}},_t=mt,vt=Object(_["a"])(_t,ut,pt,!1,null,null,null),ht=vt.exports,gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.product_name,expression:"product_name"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 bg-transparent text-white border-left-0 border-right-0",attrs:{type:"text",id:"inputProduct",placeholder:"Insert Category"},domProps:{value:t.product_name},on:{keyup:function(e){return t.fetchInventory(t.page,e.target.value,t.category_id,t.from_date,t.to_date)},input:function(e){e.target.composing||(t.product_name=e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"inputProduct"}},[t._v("Search Product/Barcode")])])]),e("div",{staticClass:"col-sm-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.category_id,expression:"category_id"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent mt-3 border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.category_id=e.target.multiple?a:a[0]},function(e){return t.fetchInventory(t.page,t.product_name,e.target.value,t.from_date,t.to_date)}]}},[e("option",{staticClass:"text-dark",attrs:{value:"0"}},[t._v("All Categories")]),t._l(t.categories,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.category_name))])}))],2)]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm text-white mb-3 bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:[function(e){e.target.composing||(t.from_date=e.target.value)},function(e){return t.fetchInventory(t.page,t.product_name,t.category_id,e.target.value,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm text-white mb-3 bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:[function(e){e.target.composing||(t.to_date=e.target.value)},function(e){return t.fetchInventory(t.page,t.product_name,t.category_id,t.from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])])])]),e("div",{staticClass:"card-body"},[e("table",{staticClass:"table text-center"},[t._m(0),t.loading?e("tbody",[t._m(1)]):e("tbody",[t.inventories.length?t._l(t.inventories,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[t._v(t._s(a.product_name))]),e("td",[t._v(t._s(a.category_name))]),e("td",[t._v(t._s(a.begstock_qty))]),e("td",[t._v(t._s(a.purchase_qty))]),e("td",[t._v(t._s(a.sales_qty))]),e("td",[t._v(t._s(a.spoilage_qty))]),e("td",{class:{"text-white bg-danger":a.endstock_qty<=a.alarmlvl}},[t._v(t._s(a.endstock_qty))])])})):e("tr",[t._m(2)])],2)]),e("div",{staticClass:"row item-bottom pl-4 pr-4"},[e("div",{staticClass:"col-4"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(3)])]),e("div",{staticClass:"col-4 text-center"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.printInventory()}}},[t._m(4)])]),e("div",{staticClass:"col-4"},[e("nav",{attrs:{"aria-label":"Page navigation example item-bottom"}},[e("ul",{staticClass:"pagination pagination-sm justify-content-end"},[e("li",{staticClass:"page-item",class:[{disabled:1==t.pagination.current_page||""==t.pagination}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchInventory(t.page=t.page-1,t.product_name,t.category_id,t.from_date,t.to_date)}}},[t._v(" Prev ")])]),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link text-dark"},[t._v("Page "+t._s(t.pagination.current_page)+" of "+t._s(t.pagination.last_page))])]),e("li",{staticClass:"page-item",class:[{disabled:t.pagination.current_page==t.pagination.last_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchInventory(t.page=t.page+1,t.product_name,t.category_id,t.from_date,t.to_date)}}},[t._v(" Next ")])])])])])])])])])])},ft=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Category")]),e("th",[t._v("Beginning")]),e("th",[t._v("Purchase")]),e("th",[t._v("Sold")]),e("th",[t._v("Spoilages")]),e("th",[t._v("Ending")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"7"}},[e("img",{attrs:{src:"/grocery/public/images/loading.gif",alt:""}})])])},function(){var t=this,e=t._self._c;return e("td",{attrs:{colspan:"7"}},[e("strong",{staticClass:"text-danger text-center"},[t._v("No Record")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-print"}),t._v(" Print All")])}],bt={data(){return{categories:[],pagination:[],inventories:[],product_name:"",category_id:0,loading:!1,from_date:new Date,to_date:new Date,page:1,imgURL:"/grocery/public/images/products/"}},created(){this.fetchCategories(),this.from_date=u()().format("YYYY-MM-DDTHH:mm"),this.to_date=u()().format("YYYY-MM-DDTHH:mm"),this.fetchInventory(this.page,this.product_name,this.category_id,this.from_date,this.to_date)},methods:{back(){this.$router.push("/")},fetchCategories(){var t=this;const e=a("bc3a");e.get("/api/getAllCategories/?page=&status=active").then((function(e){t.categories=e.data.data})).catch(t=>{console.log(t)})},fetchInventory(t,e,s,o,r){var i=this;const l=a("bc3a");i.loading=!0,i.timer&&(clearTimeout(i.timer),i.timer=null),i.timer=setTimeout(()=>{l.get("/api/getAllInventories/?page="+t+"&product_name="+e+"&category_id="+s+"&fdate="+o+"&tdate="+r).then((function(t){console.log(t.data),i.inventories=t.data.data,i.pagination=t.data.pagination,i.loading=!1})).catch(t=>{console.log(t)})},200)},printInventory(){let t=this.$router.resolve({name:"Print Inventory",query:{fdate:this.from_date,tdate:this.to_date,catid:this.category_id,product_name:this.product_name}});window.open(t.href,"_blank","height=500,width=900")}}},Ct=bt,yt=Object(_["a"])(Ct,gt,ft,!1,null,null,null),xt=yt.exports,wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card fullheight rounded-0",staticStyle:{overflow:"auto"}},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},t._l(t.menus,(function(a,s){return e("div",{key:a.id,staticClass:"col-12 mb-2",attrs:{value:a.id}},[e("button",{staticClass:"btn btn-block btn-outline-dark rounded-0",class:{active:null!==t.selectedMenu?a.id==t.selectedMenu:0===s},on:{click:function(e){t.selectedMenu=a.id,t.headerName=a.menu_name,t.fetchSales(t.z_employee_id,t.z_from_date,t.z_to_date),t.fetchSalesSingle(t.x_employee_id,t.x_from_date),t.fetchSalesProduct(t.ps_select,t.ps_from_date,t.ps_to_date),t.fetchSalesRanking(t.rank_from_date,t.rank_to_date),t.fetchEmployees()}}},[t._v(t._s(a.menu_name))])])})),0)])]),e("button",{staticClass:"btn btn-primary text-white btn-block sticky-bottom btn-lg rounded-0",on:{click:function(e){return t.back()}}},[t._m(1)])]),e("div",{staticClass:"col-sm-10"},[e("div",{staticClass:"card fullheight rounded-0",staticStyle:{overflow:"auto"}},[e("div",{staticClass:"card-header bg-gradient text-white rounded-0 pt-0 pb-0"},[null===t.selectedMenu||1==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-2 mt-3"},[e("h5",[t._v(t._s(t.headerName))])]),e("div",{staticClass:"col-sm-2 mt-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.payment_id,expression:"payment_id"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.payment_id=e.target.multiple?a:a[0]},function(e){return t.fetchSalesInvoice(e.target.value,t.customer_id,t.inv_from_date,t.inv_to_date)}]}},t._l(t.payment_types,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.payment_name))])})),0)]),e("div",{staticClass:"col-sm-2 mt-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer_id,expression:"customer_id"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.customer_id=e.target.multiple?a:a[0]},function(e){return t.fetchSalesInvoice(t.payment_id,e.target.value,t.inv_from_date,t.inv_to_date)}]}},t._l(t.customers,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.customer_name))])})),0)]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inv_from_date,expression:"inv_from_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"barfdt",placeholder:"Date"},domProps:{value:t.inv_from_date},on:{input:[function(e){e.target.composing||(t.inv_from_date=e.target.value)},function(e){return t.fetchSalesInvoice(t.payment_id,t.customer_id,e.target.value,t.inv_to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bardt"}},[t._v("From Date")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inv_to_date,expression:"inv_to_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"bartdt",placeholder:"Date"},domProps:{value:t.inv_to_date},on:{input:[function(e){e.target.composing||(t.inv_to_date=e.target.value)},function(e){return t.fetchSalesInvoice(t.payment_id,t.customer_id,t.inv_from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bartdt"}},[t._v("To Date")])])])]):t._e(),2==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6 mt-3"},[e("h5",[t._v(t._s(t.headerName))])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rank_from_date,expression:"rank_from_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"barfdt",placeholder:"Date"},domProps:{value:t.rank_from_date},on:{input:[function(e){e.target.composing||(t.rank_from_date=e.target.value)},function(e){return t.fetchSalesRanking(e.target.value,t.rank_to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bardt"}},[t._v("From Date")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rank_to_date,expression:"rank_to_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"bartdt",placeholder:"Date"},domProps:{value:t.rank_to_date},on:{input:[function(e){e.target.composing||(t.rank_to_date=e.target.value)},function(e){return t.fetchSalesRanking(t.rank_from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bartdt"}},[t._v("To Date")])])])]):t._e(),3==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3 mt-3"},[e("h5",[t._v(t._s(t.headerName))])]),e("div",{staticClass:"col-sm-3 mt-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.ps_select,expression:"ps_select"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ps_select=e.target.multiple?a:a[0]},function(e){return t.fetchSalesProduct(e.target.value,t.ps_from_date,t.ps_to_date)}]}},[e("option",{staticClass:"text-dark",attrs:{value:"1"}},[t._v("By Products")]),e("option",{staticClass:"text-dark",attrs:{value:"2"}},[t._v("By Categories")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ps_from_date,expression:"ps_from_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"barfdt",placeholder:"Date"},domProps:{value:t.ps_from_date},on:{input:[function(e){e.target.composing||(t.ps_from_date=e.target.value)},function(e){return t.fetchSalesProduct(t.ps_select,e.target.value,t.ps_to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bardt"}},[t._v("From Date")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ps_to_date,expression:"ps_to_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"bartdt",placeholder:"Date"},domProps:{value:t.ps_to_date},on:{input:[function(e){e.target.composing||(t.ps_to_date=e.target.value)},function(e){return t.fetchSalesProduct(t.ps_select,t.ps_from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"bartdt"}},[t._v("To Date")])])])]):t._e(),4==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6 mt-3"},[e("h5",[t._v(t._s(t.headerName))])]),e("div",{staticClass:"col-sm-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.x_employee_id,expression:"x_employee_id"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent mt-3 border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.x_employee_id=e.target.multiple?a:a[0]},function(e){return t.fetchSalesSingle(e.target.value,t.x_from_date)}]}},[e("option",{staticClass:"text-dark",attrs:{value:"0"}},[t._v("All Employees")]),t._l(t.x_employees,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.employee_fn+" "+a.employee_sn))])}))],2)]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.x_from_date,expression:"x_from_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"piefdt",placeholder:"Date"},domProps:{value:t.x_from_date},on:{input:[function(e){e.target.composing||(t.x_from_date=e.target.value)},function(e){return t.fetchSalesSingle(t.x_employee_id,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"pirfdt"}},[t._v("From Date")])])])]):t._e(),5==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3 mt-3"},[e("h5",[t._v(t._s(t.headerName))])]),e("div",{staticClass:"col-sm-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.z_employee_id,expression:"z_employee_id"}],staticClass:"form-control form-control-sm rounded-0 text-white bg-transparent mt-3 border-top-0 border-left-0 border-right-0",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.z_employee_id=e.target.multiple?a:a[0]},function(e){return t.fetchSales(e.target.value,t.z_from_date,t.z_to_date)}]}},[e("option",{staticClass:"text-dark",attrs:{value:"0"}},[t._v("All Employees")]),t._l(t.z_employees,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.employee_fn+" "+a.employee_sn))])}))],2)]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.z_from_date,expression:"z_from_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"piefdt",placeholder:"Date"},domProps:{value:t.z_from_date},on:{input:[function(e){e.target.composing||(t.z_from_date=e.target.value)},function(e){return t.fetchSales(t.z_employee_id,e.target.value,t.z_to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"pirfdt"}},[t._v("From Date")])])]),e("div",{staticClass:"col-sm-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.z_to_date,expression:"z_to_date"}],staticClass:"form-control form-control-sm text-white bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"pietdt",placeholder:"Date"},domProps:{value:t.z_to_date},on:{input:[function(e){e.target.composing||(t.z_to_date=e.target.value)},function(e){return t.fetchSales(t.z_employee_id,t.z_from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"pietdt"}},[t._v("To Date")])])])]):t._e()]),e("div",{staticClass:"card-body"},[null===t.selectedMenu||1==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(2),t._l(t.sales_invoices,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[t._v(t._s(a.id))]),e("td",[t._v(t._s(a.payment_name))]),e("td",[t._v(t._s(a.customer_name))]),e("td",[t._v(t._s(a.employee_fn+" "+a.employee_sn))]),e("td",[t._v(t._s(a.sales_comment))]),e("td",[t._v(t._s(a.sales_status))]),e("td",[t._v(t._s(a.created_at))]),e("td",[e("i",{staticClass:"fas fa-eye",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openReceipt(a.id)}}})]),e("td",["not remitted"==a.sales_status?e("i",{staticClass:"fas fa-ban",staticStyle:{cursor:"pointer"},on:{click:function(e){"manager"==t.$session.get("user_approval")?t.voidSales(a.id):t.waringPriv()}}}):t._e()])])])}))],2)])]):t._e(),2==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.loaded?e("div",[e("pie",{attrs:{chartData:t.pie,options:t.pieOptions}})],1):t._e()])]):t._e(),3==t.selectedMenu?e("div",{staticClass:"row"},[1==t.ps_select?e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-sm table-hover text-center"},[t._m(3),t._l(t.sales_prods,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",{staticClass:"align-middle"},[t._v(t._s(a.product_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.unit_price))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.tot_qty))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.unit_price*a.tot_qty).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_amount))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_disc))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_vat))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc-a.unit_price*a.tot_qty).toFixed(2)))])])])})),e("tbody",[e("tr",{staticClass:"font-weight-bold"},[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("TOTAL:")]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.unitCostTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.salesTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.discountTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.vatTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalAmount))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalProfit))])])])],2)]):2==t.ps_select?e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-sm table-hover text-center"},[t._m(4),t._l(t.sales_cats,(function(a){return e("tbody",{key:a.category_id},[e("tr",[e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.tot_qty))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.unit_price))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_cost))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_amount))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_disc))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_vat))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc-a.tot_cost).toFixed(2)))])])])})),e("tbody",[e("tr",{staticClass:"font-weight-bold"},[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("TOTAL:")]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.unitCostTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.salesTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.discountTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.vatTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalAmount))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalProfit))])])])],2)]):t._e(),e("div",{staticClass:"col-sm-12 item-bottom mb-3"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.printSales()}}},[t._m(5)])])]):t._e(),4==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.loaded?e("div",[e("bar",{attrs:{chartData:t.barSingle,options:t.barOptions}})],1):t._e()]),e("hr")]):t._e(),5==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.loaded?e("div",[e("bar",{attrs:{chartData:t.bar,options:t.barOptions}})],1):t._e()])]):t._e()])])])])},Pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header bg-gradient text-white rounded-0 p-3"},[e("h5",[t._v("Menus")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Invoice ID")]),e("th",[t._v("Payment Type")]),e("th",[t._v("Customer")]),e("th",[t._v("Cashier")]),e("th",[t._v("Comment")]),e("th",[t._v("Status")]),e("th",[t._v("Date Time")]),e("th",[t._v("View")]),e("th",[t._v("Void")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Category")]),e("th",[t._v("Unit Cost")]),e("th",[t._v("Sold")]),e("th",[t._v("Total Cost")]),e("th",[t._v("Total Price")]),e("th",[t._v("Discount")]),e("th",[t._v("Vat Amount")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Total Profit")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("Category Name")]),e("th",[t._v("Sold")]),e("th",[t._v("Unit Cost")]),e("th",[t._v("Total Cost")]),e("th",[t._v("Total Price")]),e("th",[t._v("Discount")]),e("th",[t._v("Vat")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Total Profit")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-print"}),t._v(" Print All")])}],kt={extends:C["a"],mixins:[C["d"].reactiveProp],props:["chartData","options"],mounted(){this.renderChart(this.chartData,this.options)}},St=kt,Dt=Object(_["a"])(St,s,o,!1,null,null,null),Tt=Dt.exports,Nt={extends:C["b"],mixins:[C["d"].reactiveProp],props:["chartData","options"],mounted(){this.renderChart(this.chartData,this.options)}},At=Nt,Mt=Object(_["a"])(At,r,i,!1,null,null,null),Yt=Mt.exports,qt=a("bc3a"),jt=a.n(qt),Et={components:{Bar:Tt,Pie:Yt},data(){return{menus:[{id:1,menu_name:"Sales Invoice"},{id:2,menu_name:"Sold Ranking"},{id:3,menu_name:"Product Sales"},{id:4,menu_name:"X Read"},{id:5,menu_name:"Z Read"}],headerName:"Sales Invoice",selectedMenu:null,loaded:!1,bar:[],barSingle:[],pie:[],barOptions:{legend:{display:!1},scales:{yAxes:[{ticks:{callback:function(t){return parseInt(t)>=1e3?"₱"+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"₱"+t}}}]},responsive:!0,maintainAspectRatio:!1},pieOptions:{responsive:!0,maintainAspectRatio:!1},employees:[],sales_prods:[],sales_cats:[],sales_invoices:[],ps_select:1,customer_id:1,payment_id:1,z_employee_id:0,x_employee_id:0,z_employees:[],x_employees:[],payment_types:[],customers:[],rank_from_date:new Date,rank_to_date:new Date,x_from_date:new Date,z_from_date:new Date,z_to_date:new Date,ps_from_date:new Date,ps_to_date:new Date,inv_from_date:new Date,inv_to_date:new Date}},created(){this.rank_from_date=u()().startOf("month").format("YYYY-MM-DD"),this.rank_to_date=u()().endOf("month").format("YYYY-MM-DD"),this.x_from_date=u()().format("YYYY-MM-DD"),this.z_from_date=u()().startOf("month").format("YYYY-MM-DD"),this.z_to_date=u()().endOf("month").format("YYYY-MM-DD"),this.ps_from_date=u()().startOf("month").format("YYYY-MM-DD"),this.ps_to_date=u()().endOf("month").format("YYYY-MM-DD"),this.inv_from_date=u()().startOf("month").format("YYYY-MM-DDTHH:mm"),this.inv_to_date=u()().endOf("month").format("YYYY-MM-DDTkk:mm"),this.fetchSalesInvoice(this.payment_id,this.customer_id,this.inv_from_date,this.inv_to_date),this.fetchPaymentTypes(),this.fetchCustomers()},methods:{back(){this.$router.push("/")},openReceipt(t){let e=this.$router.resolve({name:"SALES RECEIPT",query:{sales_id:t}});window.open(e.href,"_blank","height=500,width=800")},fetchSales(t,e,a){let s=this;s.loaded=!1,jt.a.get("/api/getSalesByDate/?frdate="+e+"&tdate="+a+"&employee_id="+t).then((function(t){s.loaded=!0;const e=t.data.data;var a=[],o=[];e.forEach(t=>{a.push(u()(t.sales_date).format("MMM DD, YYYY")),o.push(t.sales_total)}),s.bar={labels:a,datasets:[{backgroundColor:"#5b86e5",data:o}]}})).catch(t=>{console.log(t)})},fetchSalesSingle(t,e){let a=this;a.loaded=!1,jt.a.get("/api/getSalesByDate/?frdate="+e+"&employee_id="+t).then((function(t){a.loaded=!0;const e=t.data.data;var s=[],o=[];e.forEach(t=>{s.push(u()(t.sales_date).format("MMM DD, YYYY")),o.push(t.sales_total)}),a.barSingle={labels:s,datasets:[{backgroundColor:"#5b86e5",data:o}]}})).catch(t=>{console.log(t)})},fetchSalesRanking(t,e){let a=this;a.loaded=!1,a.timer&&(clearTimeout(a.timer),a.timer=null),a.timer=setTimeout(()=>{jt.a.get("/api/getSalesRankingByDate/?frdate="+t+"&tdate="+e).then((function(t){a.loaded=!0;const e=t.data.data;var s=[],o=[];e.forEach(t=>{s.push(t.product_name+" ("+t.total_qty+")"),o.push(t.total_qty)}),a.pie={labels:s,datasets:[{backgroundColor:["#5b86e5","#c91162","#4f3947","#1a355b","#a3f3a6"],data:o}]}})).catch(t=>{console.log(t)})},100)},fetchSalesProduct(t,e,a){let s=this;jt.a.get("/api/getAllSalesProduct/?frdate="+e+"&tdate="+a).then((function(t){const e=t.data.data;s.sales_prods=e.filter(t=>0!=t.tot_qty)})).catch(t=>{console.log(t)}),jt.a.get("/api/getAllSalesCategory/?frdate="+e+"&tdate="+a).then((function(t){const e=t.data.data;s.sales_cats=e.filter(t=>0!=t.tot_qty)})).catch(t=>{console.log(t)})},fetchEmployees(){let t=this;jt.a.get("/api/getAllEmployees/?status=active").then((function(e){t.loaded=!0,t.z_employees=e.data.data,t.x_employees=e.data.data})).catch(t=>{console.log(t)})},fetchPaymentTypes(){let t=this;jt.a.get("/api/getAllPaymentTypes/").then((function(e){t.payment_types=e.data.data})).catch(t=>{console.log(t)})},fetchCustomers(){let t=this;jt.a.get("/api/getAllCustomers/?customer_status=active").then((function(e){t.customers=e.data.data})).catch(t=>{console.log(t)})},fetchSalesInvoice(t,e,a,s){let o=this;jt.a.get("/api/getAllSalesInvoice/?status=active&frdate="+a+"&tdate="+s+"&payment_id="+t+"&customer_id="+e).then((function(t){o.sales_invoices=t.data.data})).catch(t=>{console.log(t)})},voidSales(t){let e=this;confirm("Are you sure to void this Invoice ID #"+t)&&jt.a.put("/api/updateSalesInvoice/",{sales_id:t}).then((function(){e.fetchSalesInvoice(e.payment_id,e.customer_id,e.inv_from_date,e.inv_to_date)})).catch(t=>{console.log(t)})},printSales(){let t=this.$router.resolve({name:"Print Sales",query:{typeid:this.ps_select,fdate:this.ps_from_date,tdate:this.ps_to_date}});window.open(t.href,"_blank","height=500,width=900")},waringPriv(){alert("Only manager can void sales....")}},computed:{salesTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_amount)}),t.toFixed(2)},unitCostTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.unit_price*e.tot_qty)}),t.toFixed(2)},vatTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_vat)}),t.toFixed(2)},discountTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_disc)}),t.toFixed(2)},totalAmount:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_amount-e.tot_vat-e.tot_disc)}),t.toFixed(2)},totalProfit:function(){return(this.totalAmount-this.unitCostTotal).toFixed(2)}}},It=Et,$t=Object(_["a"])(It,wt,Pt,!1,null,null,null),Ot=$t.exports,Bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:[function(e){e.target.composing||(t.from_date=e.target.value)},function(e){return t.fetchRemittances(e.target.value,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:[function(e){e.target.composing||(t.to_date=e.target.value)},function(e){return t.fetchRemittances(t.from_date,e.target.value)}]}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])]),e("div",{staticClass:"col-1 offset-5 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x ml-4",staticStyle:{cursor:"pointer"},attrs:{title:"Add Products"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(0),t._l(t.remittances,(function(a){return e("tbody",{key:a.remit_id},[e("tr",{class:{"bg-warning":1==a.iscancel}},[e("td",[t._v(t._s(a.remit_id))]),e("td",[t._v(t._s(a.employee_fn+" "+a.employee_sn))]),e("td",[t._v("₱ "+t._s(a.expense_amount))]),e("td",[t._v("₱ "+t._s(a.sales_amount))]),e("td",[t._v("₱ "+t._s(a.remitted_amount))]),e("td",[t._v("₱ "+t._s((Number(a.remitted_amount)+Number(a.expense_amount)-Number(a.sales_amount)).toFixed(2)))]),e("td",[t._v(t._s(t.remitDtFormat(a.created_at)))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"far fa-file",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openPortal(a.remit_id)}}})]),e("td",{staticClass:"align-middle"},[1!=a.iscancel?e("i",{staticClass:"fas fa-ban ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Cancel Remit ID #"+a.remit_id},on:{click:function(e){return t.cancelRemittance(a.remit_id)}}}):t._e()])])])}))],2)])]),e("div",{staticClass:"row item-bottom pl-4 pr-4 pb-4"},[e("div",{staticClass:"col-4"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(1)])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addProduct"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Cash Count")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("table",{staticClass:"table"},[t._l(t.denoms,(function(a){return e("tbody",{key:a.id,staticClass:"border-top-0"},[e("tr",[e("td",[t._v("₱ "+t._s(a.amount))]),e("td",{staticClass:"pl-3 pr-3 pb-1"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.money[a.id],expression:"money[denom.id]"}],staticClass:"form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number"},domProps:{value:t.money[a.id]},on:{input:function(e){e.target.composing||t.$set(t.money,a.id,e.target.value)}}})]),e("td",{staticClass:"pl-3 pr-3"},[e("input",{staticClass:"form-control form-control-sm rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",disabled:""},domProps:{value:isNaN(t.money[a.id]*a.amount)?0:t.money[a.id]*a.amount}})])])])})),e("tbody",[e("tr",[e("td"),e("td",{staticClass:"font-weight-bold text-right"},[t._v("Total Cash Count :")]),e("td",{staticClass:"pl-2 pr-2"},[t._v("₱ "+t._s(t.totAmount))])]),e("tr",[e("td"),e("td",{staticClass:"font-weight-bold text-right"},[t._v("Total Expense :")]),e("td",{staticClass:"pl-2 pr-2"},[t._v("₱ "+t._s(t.totExAmount))])]),e("tr",[e("td"),e("td",{staticClass:"font-weight-bold text-right"},[t._v("Total Cash Sale :")]),e("td",{staticClass:"pl-2 pr-2"},[t._v("₱ "+t._s(t.totSalesAmount))])]),e("tr",[e("td"),e("td",{staticClass:"font-weight-bold text-right"},[t._v("To Remit :")]),e("td",{staticClass:"pl-2 pr-2"},[t._v("₱ "+t._s(t.toRemit))])]),e("tr",[e("td"),t._m(2),e("td",{staticClass:"pl-2 pr-2",class:{"text-danger":t.grandTotal<0,"text-success":t.grandTotal>0}},[t._v("₱ "+t._s(t.grandTotal))])])])],2)]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addRemit}},[t._v("Save changes")])])])])])])},Ft=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Remitted By")]),e("th",[t._v("Total Expense")]),e("th",[t._v("Total Sales")]),e("th",[t._v("Remitted Amount")]),e("th",[e("b",{staticClass:"text-success"},[t._v("Over")]),t._v("/"),e("b",{staticClass:"text-danger"},[t._v("Short")])]),e("th",[t._v("Remit Date")]),e("th",[t._v("View")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("td",{staticClass:"font-weight-bold text-right"},[e("b",{staticClass:"text-success"},[t._v("OVERAGE")]),t._v(" / "),e("b",{staticClass:"text-danger"},[t._v("SHORTAGE")]),t._v(":")])}],Rt={data(){return{denoms:[{id:0,amount:1e3},{id:1,amount:500},{id:2,amount:200},{id:3,amount:100},{id:4,amount:50},{id:5,amount:20},{id:6,amount:10},{id:7,amount:5},{id:8,amount:1},{id:9,amount:.25}],money:[],remittances:[],remit_details:{remit_qty:0,remit_amount:0,remit_total:0},expense_amount:[],sales_amount:[],from_date:new Date,to_date:new Date,active:!1,show:!1}},created(){this.from_date=u()().startOf("month").format("YYYY-MM-DD"),this.to_date=u()().endOf("month").format("YYYY-MM-DD"),this.fetchExpenseAmount(),this.fetchSalesAmount(),this.fetchRemittances(this.from_date,this.to_date)},methods:{remitDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},back(){this.$router.push("/")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},openPortal(t){let e=this.$router.resolve({name:"REMITTANCE",query:{remit_id:t}});window.open(e.href,"_blank","height=500,width=800")},fetchRemittances(t,e){var s=this;const o=a("bc3a");o.get("/api/getAllRemittances/?fdate="+t+"&tdate="+e).then((function(t){s.remittances=t.data.data})).catch(t=>{console.log(t)})},fetchExpenseAmount(){var t=this;const e=a("bc3a");e.get("/api/getAllExpenseAmount/").then((function(e){t.expense_amount=e.data.data})).catch(t=>{console.log(t)})},fetchSalesAmount(){var t=this;const e=a("bc3a");e.get("/api/getAllSalesAmount/").then((function(e){t.sales_amount=e.data.data})).catch(t=>{console.log(t)})},addRemit(){var t=this;if(0!=t.totAmount&&0!=t.totSalesAmount){var e={cashier_id:t.$session.get("user_id"),expense_amount:t.totExAmount,sales_amount:t.totSalesAmount,remitted_amount:t.totAmount},s=[];t.denoms.forEach(e=>{s.push({remit_qty:t.money[e.id],remit_amount:e.amount,remit_total:e.amount*t.money[e.id]})});var o=new Array({remittances:e,remittance_details:s.filter((function(t){return void 0!==t.remit_qty||!isNaN(t.remit_total)}))});const r=a("bc3a");r.post("/api/addRemittance/",o).then((function(a){console.log(a.data),a.data&&(e=[],s=[],t.money=[],t.fetchExpenseAmount(),t.fetchSalesAmount(),t.fetchRemittances(t.from_date,t.to_date),t.toggleModal())})).catch(t=>{console.log(t)})}},cancelRemittance(t){var e=this;const s=a("bc3a");confirm("Do you want to cancel Remittance ID# "+t)&&s.put("/api/cancelRemittance/",{remit_id:t}).then((function(){e.fetchExpenseAmount(),e.fetchSalesAmount(),e.fetchRemittances(e.from_date,e.to_date)})).catch(t=>{console.log(t)})}},computed:{totAmount:function(){var t=0;return this.denoms.forEach(e=>{t+=isNaN(e.amount*this.money[e.id])?0:e.amount*this.money[e.id]}),t.toFixed(2)},totExAmount:function(){var t=0;return this.expense_amount.forEach(e=>{t+=parseFloat(e.total_amount)}),t.toFixed(2)},totSalesAmount:function(){var t=0;return this.sales_amount.forEach(e=>{t+=parseFloat(e.total_amount)}),t.toFixed(2)},toRemit:function(){return(this.totSalesAmount-this.totExAmount).toFixed(2)},grandTotal:function(){return(Number(this.totAmount)+Number(this.totExAmount)-Number(this.totSalesAmount)).toFixed(2)}}},Ut=Rt,Lt=Object(_["a"])(Ut,Bt,Ft,!1,null,null,null),zt=Lt.exports,Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:function(e){e.target.composing||(t.from_date=e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"date",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:function(e){e.target.composing||(t.to_date=e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])]),e("div",{staticClass:"col-1 offset-5 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Purchase"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table text-center"},[t._m(0),t._l(t.expenses,(function(a){return e("tbody",{key:a.ex_id},[e("tr",{class:{"bg-warning":1==a.iscancel}},[e("td",[t._v(t._s(a.ex_id))]),e("td",[t._v(t._s(a.employee_fn+" "+a.employee_sn))]),e("td",[t._v("₱ "+t._s(a.total_amount))]),e("td",[t._v(t._s(a.expense_note))]),e("td",[t._v(t._s(t.expenseDtFormat(a.created_at)))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"far fa-file",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openPortal(a.ex_id)}}})]),e("td",{staticClass:"align-middle"},[1!=a.iscancel?e("i",{staticClass:"fas fa-ban ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Cancel Expense ID #"+a.ex_id},on:{click:function(e){return t.cancelExpense(a.ex_id)}}}):t._e()])])])}))],2)])]),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(1)])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addPurchase"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Expense")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expense.created_at,expression:"expense.created_at"}],staticClass:"form-control form-control-sm mb-3 bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"created_at",placeholder:"Date"},domProps:{value:t.expense.created_at},on:{input:function(e){e.target.composing||t.$set(t.expense,"created_at",e.target.value)}}}),e("label",{attrs:{for:"created_at"}},[t._v("Expense Date")])])]),e("div",{staticClass:"col-sm-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"comment"}},[t._v("Comment:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.expense.expense_note,expression:"expense.expense_note"}],staticClass:"form-control form-control-sm rounded-0",attrs:{id:"comment",cols:"30",rows:"7",placeholder:"Optional"},domProps:{value:t.expense.expense_note},on:{input:function(e){e.target.composing||t.$set(t.expense,"expense_note",e.target.value)}}})]),e("hr"),e("div",{staticClass:"col-sm-6 mt-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.expense_details.particulars_id,expression:"expense_details.particulars_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"particulars_id"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.expense_details,"particulars_id",e.target.multiple?a:a[0])},function(e){return t.fetchParticularsById()}]}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Particulars")]),t._l(t.particulars,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.particulars_name))])}))],2)]),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expense_details.expense_amount,expression:"expense_details.expense_amount"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",id:"expense_amount",min:"0",placeholder:"Expense Amount"},domProps:{value:t.expense_details.expense_amount},on:{input:function(e){e.target.composing||t.$set(t.expense_details,"expense_amount",e.target.value)}}}),e("label",{attrs:{for:"expense_amount"}},[t._v("Expense Amount")])])]),e("div",{staticClass:"col-sm-6"},[e("button",{staticClass:"btn btn-info btn-block btn-sm rounded-0 mb-3",on:{click:t.addQueue}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ADD")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table text-center"},[t._m(2),e("tbody",[t._l(t.dups,(function(a,s){return e("tr",{key:a.product_id},[e("td",[t._v(t._s(t.dups[s].particulars_name))]),e("td",[t._v("₱ "+t._s(parseFloat(t.dups[s].expense_amount).toFixed(2)))]),e("td",[e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+t.dups[s].particulars_name},on:{click:function(e){return t.deleteQueue(s)}}})])])})),t._m(3),e("tr",[e("td",{staticClass:"float-right"},[t._v(t._s(0==t.expenseTotal?"":"Total: "))]),e("td",[t._v(t._s(0==t.expenseTotal?"":"₱ "+t.expenseTotal))]),e("td")])],2)])])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addExpense}},[t._v("Save changes")])])])])])])},Ht=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Cashier Name")]),e("th",[t._v("Total Expense")]),e("th",[t._v("Note")]),e("th",[t._v("Date")]),e("th",[t._v("View")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Particulars Name")]),e("th",[t._v("Amount")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"5"}},[e("hr")])])}],Vt={data(){return{msg:"",show:!1,active:!1,edit:!1,errors:[],suppliers:[],dups:[],particulars:[],queue_expense:[],expenses:[],expense:{total_amount:0,cashier_id:this.$session.get("user_id"),created_at:new Date,expense_note:""},from_date:new Date,to_date:new Date,expense_details:{particulars_id:0,expense_amount:0},page:1}},created(){this.expense.created_at=u()().format("YYYY-MM-DDTkk:mm"),this.from_date=u()().startOf("month").format("YYYY-MM-DD"),this.to_date=u()().endOf("month").format("YYYY-MM-DD"),this.fetchParticulars(),this.fetchExpenses()},computed:{expenseTotal:function(){var t=0;return this.dups.forEach(e=>{t+=parseFloat(e.expense_amount)}),t.toFixed(2)}},methods:{back(){this.$router.push("/")},expenseDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},openPortal(t){let e=this.$router.resolve({name:"EXPENSE DETAILS",query:{expense_id:t}});window.open(e.href,"_blank","height=500,width=800")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},fetchParticulars(){var t=this;const e=a("bc3a");e.get("/api/getAllParticulars/").then((function(e){t.particulars=e.data.data})).catch(t=>{console.log(t)})},fetchExpenses(){var t=this;const e=a("bc3a");e.get("/api/getAllExpenses/?from_date="+this.from_date+"&to_date="+this.to_date).then((function(e){t.expenses=e.data.data})).catch(t=>{console.log(t)})},fetchParticularsById(){var t=this;const e=a("bc3a");e.get("/api/getAllParticularsById/?particulars_id="+t.expense_details.particulars_id).then((function(e){const a=e.data.data;a.forEach(e=>{t.expense_details.particulars_name=e.particulars_name})})).catch(t=>{console.log(t)})},addExpense(){var t=this;t.expense={total_amount:t.expenseTotal,cashier_id:t.$session.get("user_id"),created_at:new Date,expense_note:""};var e=new Array({expense:t.expense,expense_details:t.dups});const s=a("bc3a");s.post("/api/addExpense/",e).then((function(e){e.data&&(t.expense={total_amount:t.expenseTotal,cashier_id:t.$session.get("user_id"),created_at:u()(new Date).format("YYYY-MM-DDTkk:mm"),expense_note:""},t.expense_details={particulars_id:0,expense_amount:0},t.dups=[],t.toggleModal())})).catch(t=>{console.log(t)})},cancelExpense(t){var e=this;const s=a("bc3a");confirm("Are you sure to delete Expense ID#"+t)&&s.get("/api/cancelExpensesById/?expense_id="+t).then((function(){e.fetchExpenses()})).catch(t=>{console.log(t)})},addQueue(){var t=this;t.expense_details.particulars_id>0&&t.queue_expense.push({...t.expense_details}),t.queue_expense.filter((function(e,a){a===t.queue_expense.length-1&&-1==t.dups.map((function(t){return t.particulars_id})).indexOf(e.particulars_id)&&t.dups.push({particulars_id:e.particulars_id,particulars_name:e.particulars_name,expense_amount:e.expense_amount})}))},deleteQueue(t){this.dups.splice(t,1)}}},Gt=Vt,Xt=Object(_["a"])(Gt,Qt,Ht,!1,null,null,null),Wt=Xt.exports,Jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[t._m(0),1==t.expense.iscancel?e("img",{staticStyle:{position:"absolute",width:"600px","z-index":"10"},attrs:{src:t.imgURL+"cancelled.png"}}):t._e(),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Remitted By:")]),t._v(" "+t._s(t.expense.employee_fn+" "+t.expense.employee_sn))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Date:")]),t._v(" "+t._s(t.expenseDtFormat(t.expense.created_at)))])]),e("br"),e("br"),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table"},[t._m(1),e("tbody",[t._l(t.expense_details,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[t._v(t._s(a.particulars_name))]),e("td",[t._v("₱ "+t._s(a.expense_amount))])])})),e("tr",[e("td",{staticClass:"text-right font-weight-bold pr-3"},[t._v("Total:")]),e("td",[t._v("₱ "+t._s(t.totalExpenses))])])],2)])])]),t._m(2),t._m(3)])},Zt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("h5",[t._v("Cabanatuan City, Nueva Ecija")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Particulars")]),e("th",[t._v("Amount")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-4"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],Kt={data(){return{expense:[],expense_details:[],imgURL:"/grocery/public/images/"}},created(){this.fetchExpenseDetails(),this.fetchExpenses()},computed:{totalExpenses:function(){var t=0;return this.expense_details.forEach(e=>{t+=parseFloat(e.expense_amount)}),t.toFixed(2)}},methods:{expenseDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},fetchExpenses(){var t=this;const e=a("bc3a");e.get("/api/getExpenseById/?expense_id="+t.$route.query.expense_id).then((function(e){t.expense=e.data[0]})).catch(t=>{console.log(t)})},fetchExpenseDetails(){var t=this;const e=a("bc3a");e.get("/api/getAllExpenseDetailsById/?expense_id="+t.$route.query.expense_id).then((function(e){t.expense_details=e.data.data})).catch(t=>{console.log(t)})}}},te=Kt,ee=Object(_["a"])(te,Jt,Zt,!1,null,null,null),ae=ee.exports,se=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:[function(e){e.target.composing||(t.from_date=e.target.value)},function(e){return t.fetchSpoilages(t.from_date,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:[function(e){e.target.composing||(t.to_date=e.target.value)},function(e){return t.fetchSpoilages(t.from_date,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])]),e("div",{staticClass:"col-1 offset-5 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Purchase"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped text-center"},[t._m(0),e("tbody",t._l(t.spoilages,(function(a){return e("tr",{key:a.id,class:{"bg-warning":1==a.iscancel}},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.id))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.employee_fn)+" "+t._s(a.employee_sn))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.spoilage_note))]),e("td",{staticClass:"align-middle"},[t._v(t._s(t.spoilageDtFormat(a.created_at)))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"far fa-file",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openPortal(a.id)}}})]),e("td",{staticClass:"align-middle"},[1!=a.iscancel?e("i",{staticClass:"fas fa-ban ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Cancel ID# "+a.id},on:{click:function(e){return t.cancelSpoilage(a.id)}}}):e("i",{staticClass:"fas fa-ban ml-2"})])])})),0)])])]),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(1)])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addSpoilage"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Spoilage")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage.created_at,expression:"spoilage.created_at"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"created_at",placeholder:"Date"},domProps:{value:t.spoilage.created_at},on:{input:function(e){e.target.composing||t.$set(t.spoilage,"created_at",e.target.value)}}}),e("label",{attrs:{for:"created_at"}},[t._v("Date")])])]),e("div",{staticClass:"col-sm-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"comment"}},[t._v("Comment:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.spoilage.spoilage_note,expression:"spoilage.spoilage_note"}],staticClass:"form-control form-control-sm rounded-0",attrs:{id:"comment",cols:"30",rows:"7",placeholder:"Optional"},domProps:{value:t.spoilage.spoilage_note},on:{input:function(e){e.target.composing||t.$set(t.spoilage,"spoilage_note",e.target.value)}}})]),e("hr"),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.search_product,expression:"spoilage_product.search_product"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"search_product",placeholder:"Search Product"},domProps:{value:t.spoilage_product.search_product},on:{input:[function(e){e.target.composing||t.$set(t.spoilage_product,"search_product",e.target.value)},function(e){return t.fetchProducts(e.target.value)}]}}),e("label",{attrs:{for:"search_product"}},[t._v("Search Product")])])]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.product_id,expression:"spoilage_product.product_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"product_id"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.spoilage_product,"product_id",e.target.multiple?a:a[0])},function(e){return t.fetchProductById()}]}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Product")]),t._l(t.products,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s("("+a.stock_qty+") "+a.product_name))])}))],2)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.spoilage_qty,expression:"spoilage_product.spoilage_qty"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",id:"spoilage_qty",min:"1",max:t.max_stock,placeholder:"Quantity"},domProps:{value:t.spoilage_product.spoilage_qty},on:{input:[function(e){e.target.composing||t.$set(t.spoilage_product,"spoilage_qty",e.target.value)},t.maxInput]}}),e("label",{attrs:{for:"spoilage_qty"}},[t._v("Quantity")])])]),e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-info btn-block item-bottom btn-sm rounded-0 mb-3",on:{click:t.addQueue}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ADD")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table text-center"},[t._m(2),e("tbody",[t._l(t.dups,(function(a,s){return e("tr",{key:a.product_id},[e("td",[t._v(t._s(t.dups[s].product_name))]),e("td",[t._v(t._s(t.dups[s].spoilage_qty))]),e("td",[e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+t.dups[s].product_name},on:{click:function(e){return t.deleteQueue(s)}}})])])})),t._m(3),e("tr",[e("td",{attrs:{colspan:"2"}}),e("td",{staticClass:"float-right"},[t._v(t._s(0==t.spoilageTotal?"":"Total: "))]),e("td",[t._v(t._s(0==t.spoilageTotal?"":"₱ "+t.spoilageTotal))]),e("td")])],2)])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addSpoilage}},[t._v("Save changes")])])])])])])},oe=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Cashier")]),e("th",[t._v("Note")]),e("th",[t._v("Date")]),e("th",[t._v("View")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"5"}},[e("hr")])])}],re={data(){return{msg:"",show:!1,active:!1,edit:!1,errors:[],spoilages:[],products:[],suppliers:[],queue_spoilage:[],dups:[],max_stock:0,spoilage:{cashier_id:this.$session.get("user_id"),created_at:new Date,spoilage_note:""},from_date:new Date,to_date:new Date,spoilage_product:{product_id:0,product_name:"",spoilage_qty:1,unit_price:0},page:1}},created(){this.spoilage.created_at=u()().format("YYYY-MM-DDThh:mm"),this.from_date=u()().startOf("month").format("YYYY-MM-DDThh:mm"),this.to_date=u()().endOf("month").format("YYYY-MM-DDTkk:mm"),this.fetchProducts(),this.fetchSpoilages(this.from_date,this.to_date)},computed:{spoilageTotal:function(){var t=0;return this.dups.forEach(e=>{t+=parseFloat(e.spoilage_qty*e.unit_price)}),t.toFixed(2)},validDr:function(){return this.purchase.drnum.length<=1},validSupplier:function(){return 0==this.purchase.supplier_id}},methods:{back(){this.$router.push("/")},spoilageDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},openPortal(t){let e=this.$router.resolve({name:"PSPOILAGE",query:{spoilage_id:t}});window.open(e.href,"_blank","height=500,width=800")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},maxInput(t){var e=this;const a=parseInt(t.target.value),s=parseInt(t.target.min),o=parseInt(t.target.max);return a<s||Number.isNaN(a)?e.spoilage_product.spoilage_qty=0:e.spoilage_product.spoilage_qty=a>o?o:a},fetchProducts(t=""){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProductInventories/?product_name="+t).then((function(t){const a=t.data.data;e.products=a.filter(t=>0!=t.stock_qty)})).catch(t=>{console.log(t)})},500)},fetchSpoilages(t,e){var s=this;const o=a("bc3a");o.get("/api/getAllSpoilages/?from_date="+t+"&to_date="+e).then((function(t){s.spoilages=t.data.data})).catch(t=>{console.log(t)})},fetchProductById(){var t=this;const e=a("bc3a");e.get("/api/getProductInventoriesById/?product_id="+t.spoilage_product.product_id).then((function(e){const a=e.data.data;a.forEach(e=>{t.spoilage_product.product_name=e.product_name,t.max_stock=e.stock_qty})})).catch(t=>{console.log(t)})},addSpoilage(){var t=this,e=new Array({spoilage:t.spoilage,spoilage_product:t.dups});const s=a("bc3a");s.post("/api/addSpoilage/",e).then((function(e){console.log(e.data),e.data&&(t.spoilage={cashier_id:t.$session.get("user_id"),created_at:u()(new Date).format("YYYY-MM-DDThh:mm"),spoilage_note:""},t.spoilage_product={product_id:0,product_name:"",spoilage_qty:1,unit_price:0},t.dups=[],t.toggleModal(),t.fetchProducts(),t.fetchSpoilages(t.from_date,t.to_date))})).catch(t=>{console.log(t)})},cancelSpoilage(t){var e=this;const s=a("bc3a");confirm("Do you want to cancel spoilage ID# "+t)&&s.put("/api/cancelSpoilageById/",{spoilage_id:t}).then((function(){e.fetchProducts(),e.fetchSpoilages(e.from_date,e.to_date)})).catch(t=>{console.log(t)})},addQueue(){var t=this;0!=t.spoilage_product.product_id&&t.queue_spoilage.push({...this.spoilage_product}),t.queue_spoilage.filter((function(e,a){a===t.queue_spoilage.length-1&&-1==t.dups.map((function(t){return t.product_id})).indexOf(e.product_id)&&t.dups.push({product_id:e.product_id,product_name:e.product_name,spoilage_qty:e.spoilage_qty,unit_price:e.unit_price})}))},deleteQueue(t){this.dups.splice(t,1)}}},ie=re,le=Object(_["a"])(ie,se,oe,!1,null,null,null),ce=le.exports,ne=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-2"},[e("div",{staticClass:"card fullheight rounded-0",staticStyle:{overflow:"auto"}},[t._m(0),e("div",{staticClass:"card-body"},[e("div",{staticClass:"row"},t._l(t.menus,(function(a,s){return e("div",{key:a.id,staticClass:"col-12 mb-2",attrs:{value:a.id}},[e("button",{staticClass:"btn btn-block btn-outline-dark rounded-0",class:{active:null!==t.selectedMenu?a.id==t.selectedMenu:0===s},on:{click:function(e){t.selectedMenu=a.id,t.headerName=a.menu_name,3==t.selectedMenu?t.flush():t.fetchEmployeesById(t.$session.get("user_id")),3==t.selectedMenu?t.edit=!0:t.edit=!1}}},[t._v(t._s(a.menu_name))])])})),0)])]),e("button",{staticClass:"btn btn-primary text-white btn-block sticky-bottom btn-lg rounded-0",on:{click:function(e){return t.back()}}},[t._m(1)])]),e("div",{staticClass:"col-sm-10"},[e("div",{staticClass:"card fullheight rounded-0",staticStyle:{overflow:"auto"}},[e("div",{staticClass:"card-header bg-gradient text-white rounded-0 p-3"},[e("div",{staticClass:"col-sm-2"},[e("h5",[t._v(t._s(t.headerName))])])]),e("div",{staticClass:"card-body"},[null===t.selectedMenu||1==t.selectedMenu||3==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_fn,expression:"employee.employee_fn"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_fn},attrs:{type:"text",id:"fn",placeholder:"First Name"},domProps:{value:t.employee.employee_fn},on:{input:function(e){e.target.composing||t.$set(t.employee,"employee_fn",e.target.value)}}}),e("label",{attrs:{for:"fn"}},[t._v("First Name")]),t.errors.employee_fn?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_fn))]):t._e()])]),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_mn,expression:"employee.employee_mn"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"mn",placeholder:"Maiden Name (optional)"},domProps:{value:t.employee.employee_mn},on:{input:function(e){e.target.composing||t.$set(t.employee,"employee_mn",e.target.value)}}}),e("label",{attrs:{for:"mn"}},[t._v("Maiden Name (optional)")])])]),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_sn,expression:"employee.employee_sn"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_sn},attrs:{type:"text",id:"sn",placeholder:"Surname"},domProps:{value:t.employee.employee_sn},on:{input:function(e){e.target.composing||t.$set(t.employee,"employee_sn",e.target.value)}}}),e("label",{attrs:{for:"sn"}},[t._v("Surname")]),t.errors.employee_sn?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_sn))]):t._e()])]),e("div",{staticClass:"col-sm-4"},[t._m(2),e("select",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_prov,expression:"employee.employee_prov"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_prov},on:{input:function(e){t.fetchCityMuns(e.target.value),t.citymuns=[],t.brgys=[]},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.employee,"employee_prov",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select Province")]),t._l(t.provinces,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.provCode}},[t._v(t._s(a.provDesc))])}))],2),t.errors.employee_prov?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_prov))]):t._e()]),e("div",{staticClass:"col-sm-4"},[t._m(3),e("select",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_citymun,expression:"employee.employee_citymun"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_citymun},on:{input:function(e){t.fetchBrgys(e.target.value),t.brgys=[]},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.employee,"employee_citymun",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select City")]),t._l(t.citymuns,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.citymunCode}},[t._v(t._s(a.citymunDesc))])}))],2),t.errors.employee_citymun?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_citymun))]):t._e()]),e("div",{staticClass:"col-sm-4"},[t._m(4),e("select",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_brgy,expression:"employee.employee_brgy"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_brgy},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.employee,"employee_brgy",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select Baranggay")]),t._l(t.brgys,(function(a){return e("option",{key:a.brgyCode,staticClass:"text-dark",domProps:{value:a.brgyCode}},[t._v(t._s(a.brgyDesc))])}))],2),t.errors.employee_brgy?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_brgy))]):t._e()]),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.employee.employee_phone,expression:"employee.employee_phone"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0 mt-3",class:{"is-invalid":t.errors.employee_phone},attrs:{type:"number",id:"phone",placeholder:"Contact #"},domProps:{value:t.employee.employee_phone},on:{input:function(e){e.target.composing||t.$set(t.employee,"employee_phone",e.target.value)}}}),e("label",{attrs:{for:"phone"}},[t._v("Contact #")]),t.errors.employee_phone?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_phone))]):t._e()])]),e("div",{staticClass:"col-sm-6 mt-3"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()]),e("div",{staticClass:"col-sm-2 mt-4"},[e("button",{staticClass:"btn btn-sm btn-block btn-outline-info",on:{click:t.updateAccount}},[t._v("Save")])])]):t._e(),2==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPass,expression:"oldPass"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"password",id:"cp",placeholder:"Current Password"},domProps:{value:t.oldPass},on:{input:function(e){e.target.composing||(t.oldPass=e.target.value)}}}),e("label",{attrs:{for:"cp"}},[t._v("Current Password")]),t.errors.oldPass?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.oldPass))]):t._e()])]),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPass,expression:"newPass"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"password",id:"np",placeholder:"Enter New Password"},domProps:{value:t.newPass},on:{input:function(e){e.target.composing||(t.newPass=e.target.value)}}}),e("label",{attrs:{for:"np"}},[t._v("Enter New Password")]),t.errors.newPass?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.newPass))]):t._e()])]),e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPass,expression:"confirmPass"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"password",id:"cnp",placeholder:"Confirm New Password"},domProps:{value:t.confirmPass},on:{input:function(e){e.target.composing||(t.confirmPass=e.target.value)}}}),e("label",{attrs:{for:"cnp"}},[t._v("Confirm New Password")]),t.errors.confirmPass?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.confirmPass))]):t._e()])]),e("div",{staticClass:"col-sm-6 mt-3"},[t.msgpass?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msgpass)+" ")]):t._e()]),e("div",{staticClass:"col-sm-2 offset-sm-4 mt-3"},[e("button",{staticClass:"btn btn-sm btn-outline-info btn-block",on:{click:t.changePass}},[t._v("Save")])])]):t._e(),3==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(5),t._l(t.emps,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[t._v(t._s(a.employee_fn+" "+a.employee_sn))]),e("td",[t._v(t._s(a.employee_phone))]),e("td",[t._v(t._s(a.brgyDesc+", "+a.citymunDesc+" "+a.provDesc))]),e("td",[e("i",{staticClass:"fa fa-edit mr-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Edit "+a.employee_fn+" "+a.employee_sn},on:{click:function(e){return t.editEmployee(a)}}})])])])}))],2)])]):t._e(),4==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4 mt-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.customer_name,expression:"customer.customer_name"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.customer_name},attrs:{type:"text",id:"cusname",placeholder:"Customer Name"},domProps:{value:t.customer.customer_name},on:{input:function(e){e.target.composing||t.$set(t.customer,"customer_name",e.target.value)}}}),e("label",{attrs:{for:"cusname"}},[t._v("Customer Name")]),t.errors.customer_name?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.customer_name))]):t._e()])]),e("div",{staticClass:"col-sm-4 mt-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.customer.customer_phone,expression:"customer.customer_phone"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.customer_phone},attrs:{type:"number",id:"cph",placeholder:"Customer Contact#"},domProps:{value:t.customer.customer_phone},on:{input:function(e){e.target.composing||t.$set(t.customer,"customer_phone",e.target.value)}}}),e("label",{attrs:{for:"cph"}},[t._v("Customer Contact#")]),t.errors.customer_phone?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.customer_phone))]):t._e()])]),e("div",{staticClass:"col-sm-4"},[t._m(6),e("select",{directives:[{name:"model",rawName:"v-model",value:t.customer.customer_status,expression:"customer.customer_status"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.customer,"customer_status",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"1"}},[t._v("Active")]),e("option",{staticClass:"text-dark",attrs:{value:"2"}},[t._v("Inactive")])])]),e("div",{staticClass:"col-sm-6 mt-3"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()]),e("div",{staticClass:"col-sm-2 offset-sm-4 mt-3 mb-3"},[e("button",{staticClass:"btn btn-sm btn-outline-info btn-block",on:{click:t.addCustomer}},[t._v("Save")])]),e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(7),t._l(t.custs,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[t._v(t._s(a.customer_name))]),e("td",[t._v(t._s(a.customer_phone))]),e("td",[t._v(t._s(a.customer_status))]),e("td",[1!=a.id?e("i",{staticClass:"fa fa-edit mr-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Edit "+a.customer_name},on:{click:function(e){return t.editCustomer(a)}}}):t._e()])])])}))],2)])]):t._e(),5==t.selectedMenu?e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-3"},[t._m(8),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.employee_id,expression:"user.employee_id"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.employee_id},attrs:{id:"user-emp"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"employee_id",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select Employee")]),t._l(t.emp_users,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.id}},[t._v(t._s(a.employee_fn+" "+a.employee_sn))])}))],2),t.errors.employee_id?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.employee_id))]):t._e()]),e("div",{staticClass:"col-sm-3 mt-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control form-control-sm bg-transparent rounded-0 border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.username},attrs:{type:"text",id:"usernames",placeholder:"Username"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("label",{attrs:{for:"usernames"}},[t._v("Username")]),t.errors.username?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.username))]):t._e()])]),e("div",{staticClass:"col-sm-3"},[t._m(9),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.user_status,expression:"user.user_status"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"user_status",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"1"}},[t._v("Active")]),e("option",{staticClass:"text-dark",attrs:{value:"2"}},[t._v("Inactive")])])]),e("div",{staticClass:"col-sm-3"},[t._m(10),e("select",{directives:[{name:"model",rawName:"v-model",value:t.user.user_approval,expression:"user.user_approval"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.user,"user_approval",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"1"}},[t._v("Cashier")]),e("option",{staticClass:"text-dark",attrs:{value:"2"}},[t._v("Manager")])])]),e("div",{staticClass:"col-sm-10 mt-3"},[t.msguser?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msguser)+" ")]):t._e()]),e("div",{staticClass:"col-sm-2 mt-3"},[e("button",{staticClass:"btn btn-sm btn-outline-info btn-block",on:{click:t.addUser}},[t._v("Save")])]),e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(11),t._l(t.usr,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[t._v(t._s(a.employee_fn+" "+a.employee_sn))]),e("td",[t._v(t._s(a.username))]),e("td",[t._v(t._s(a.user_approval))]),e("td",[t._v(t._s(a.user_status))])])])}))],2)])]):t._e()])])])])},de=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"card-header bg-gradient text-white rounded-0 p-3"},[e("h5",[t._v("Settings Menus")])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Province")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("City/Municipality")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Barangay")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Employee Name")]),e("th",[t._v("Contact#")]),e("th",[t._v("Address")]),e("th",[t._v("Update")])])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Status")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Customer Name")]),e("th",[t._v("Contact#")]),e("th",[t._v("Status")]),e("th",[t._v("Update")])])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:"user-emp"}},[e("small",[t._v("Employees")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Status")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Account Approval")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Employee Name")]),e("th",[t._v("Username")]),e("th",[t._v("Approval")]),e("th",[t._v("Status")])])])}],ue={data(){return{menus:[{id:1,menu_name:"My Account"},{id:2,menu_name:"Change Password"},{id:3,menu_name:"Employees"},{id:4,menu_name:"Customers"},{id:5,menu_name:"Users"},{id:6,menu_name:"Printer Settings"}],headerName:"My Account",selectedMenu:null,employee:{id:this.$session.get("user_id"),employee_fn:"",employee_mn:"",employee_sn:"",employee_prov:0,employee_citymun:0,employee_brgy:0,employee_phone:0},user:{employee_id:0,username:"",user_approval:1,user_status:1},customer:{customer_name:"",customer_phone:"",customer_status:1},provinces:[],citymuns:[],brgys:[],errors:[],edit:!1,edit_customer:!1,msg:!1,msgpass:!1,msguser:!1,oldPass:"",newPass:"",confirmPass:"",emps:[],custs:[],emp_users:[],usr:[]}},mounted(){if("cashier"==this.$session.get("user_approval")){var t=[4,5];for(let e=t.length-1;e>=0;e--)this.menus.splice(t[e],1)}},created(){this.fetchProvinces(),this.fetchEmployeesById(this.$session.get("user_id")),this.fetchEmployees(),this.fetchCustomers(),this.fetchEmployeesWithoutUser(),this.fetchUsers()},methods:{back(){this.$router.push("/")},flush(){this.employee={id:this.$session.get("user_id"),employee_fn:"",employee_mn:"",employee_sn:"",employee_prov:0,employee_citymun:0,employee_brgy:0,employee_phone:0}},validFName(){return this.employee.employee_fn.length<=1},validSName(){return this.employee.employee_sn.length<=1},validContact(){return this.employee.employee_phone.length<=5||0==this.employee.employee_phone},validProvince(){return 0==this.employee.employee_prov},validCity(){return 0==this.employee.employee_citymun},validBarangay(){return 0==this.employee.employee_brgy},validCurrentPass(){return""==this.oldPass||this.oldPass.length<5},validNewPass(){return""==this.newPass||this.newPass.length<5},validCNewPass(){return""==this.confirmPass||this.oldPass.length<5},validSamePass(){return this.newPass!=this.confirmPass},validCusName(){return this.customer.customer_name.length<=1},validCusNum(){return this.customer.customer_phone.length<=5||0==this.customer.customer_phone},validUsername(){return this.user.username.length<=3},validEmployee(){return 0==this.user.employee_id},fetchEmployeesById(t){var e=this;jt.a.get("/api/getEmployeesById/?status=active&id="+t).then((function(t){var a=t.data.data;a.forEach(t=>{e.employee.employee_fn=t.employee_fn,e.employee.employee_mn=t.employee_mn,e.employee.employee_sn=t.employee_sn,e.employee.employee_prov=t.employee_prov,e.employee.employee_citymun=t.employee_citymun,e.employee.employee_brgy=t.employee_brgy,e.employee.employee_phone=t.employee_phone}),e.fetchCityMuns(e.employee.employee_prov),e.fetchBrgys(e.employee.employee_citymun)})).catch(t=>{console.log(t)})},fetchEmployees(){var t=this;jt.a.get("/api/getAllEmployees/?status=active&id="+t.$session.get("user_id")).then((function(e){t.emps=e.data.data})).catch(t=>{console.log(t)})},fetchEmployeesWithoutUser(){var t=this;jt.a.get("/api/getAllEmployeesWithoutUser/?id="+t.$session.get("user_id")).then((function(e){t.emp_users=e.data.data})).catch(t=>{console.log(t)})},fetchCustomers(){var t=this;jt.a.get("/api/getAllCustomers/?customer_status=").then((function(e){t.custs=e.data.data})).catch(t=>{console.log(t)})},fetchProvinces(){var t=this;jt.a.get("/api/getAllProvinces/").then((function(e){t.provinces=e.data.data})).catch(t=>{console.log(t)})},fetchCityMuns(t){var e=this;jt.a.get("/api/getCityMun/?provCode="+t).then((function(t){e.citymuns=t.data.data})).catch(t=>{console.log(t)})},fetchBrgys(t){var e=this;jt.a.get("/api/getBarangay/?citymunCode="+t).then((function(t){e.brgys=t.data.data})).catch(t=>{console.log(t)})},updateAccount(){var t=this;t.errors=[],t.validSName()&&(t.errors.employee_sn="Please input your Surname."),t.validFName()&&(t.errors.employee_fn="Please input your Firstname."),t.validProvince()&&(t.errors.employee_prov="Please Select Province."),t.validCity()&&(t.errors.employee_citymun="Please Select City."),t.validBarangay()&&(t.errors.employee_brgy="Please Select Barangay."),t.validContact()&&(t.errors.employee_phone="Please input your Contact."),t.validSName()||t.validFName()||t.validCity()||t.validBarangay()||t.validContact()||t.validProvince()||(1==t.edit?jt.a.post("/api/addEmployee/",t.employee).then((function(){t.msg="Employee Added Successfully!",t.fetchEmployees(),setTimeout(()=>{t.msg=!1},3e3)})).catch(t=>{console.log(t)}):jt.a.put("/api/addEmployee/",t.employee).then((function(){t.msg="Employee Updated Successfully!",t.fetchEmployees(),setTimeout(()=>{t.msg=!1},3e3)})).catch(t=>{console.log(t)}))},changePass(){var t=this;t.errors=[],t.validCurrentPass()&&(t.errors.oldPass="Please input current password more than 5 characters."),t.validNewPass()&&(t.errors.newPass="Please input new password more than 5 characters."),t.validSamePass()&&(t.errors.newPass="Password Not Match."),t.validCNewPass()&&(t.errors.confirmPass="Please input new password more than 5 characters."),t.validCurrentPass()||t.validNewPass()||t.validCNewPass()||t.validSamePass()||jt.a.put("/api/updateUserPassword/",{oldpass:t.oldPass,newpass:t.newPass,id:t.$session.get("user_id")}).then((function(){t.oldPass="",t.newPass="",t.confirmPass="",t.msgpass="Password updated successfully!!",setTimeout(()=>{t.msgpass=!1},3e3)})).catch(t=>{console.log(t)})},editEmployee(t){let e=this;e.edit=!1,e.employee.id=t.id,e.employee.employee_fn=t.employee_fn,e.employee.employee_mn=t.employee_mn,e.employee.employee_sn=t.employee_sn,e.employee.employee_prov=t.employee_prov,e.employee.employee_citymun=t.employee_citymun,e.employee.employee_brgy=t.employee_brgy,e.employee.employee_phone=t.employee_phone,e.fetchCityMuns(t.employee_prov),e.fetchBrgys(t.employee_citymun)},addCustomer(){var t=this;t.errors=[],t.validCusName()&&(t.errors.customer_name="Please Customer name."),t.validCusNum()&&(t.errors.customer_phone="Please Input Customer Phone Number."),t.validCusName()||t.validCusNum()||(1==t.edit?jt.a.post("/api/addCustomer/",t.customer).then((function(){t.msg="Customer Added Successfully!",t.fetchCustomers(),setTimeout(()=>{t.msg=!1},3e3)})).catch(t=>{console.log(t)}):jt.a.put("/api/addCustomer/",t.customer).then((function(){t.msg="Customer Updated Successfully!",t.fetchCustomers(),setTimeout(()=>{t.msg=!1},3e3)})).catch(t=>{console.log(t)}))},editCustomer(t){let e=this;e.edit_customer=!1,e.customer.id=t.id,e.customer.customer_name=t.customer_name,e.customer.customer_phone=t.customer_phone,e.customer.customer_status="active"==t.customer_status?1:2},addUser(){let t=this;t.errors=[],t.validUsername()&&(t.errors.username="Please input username."),t.validEmployee()&&(t.errors.employee_id="Please select employee."),t.validUsername()||t.validEmployee()||jt.a.post("/api/addUser/",t.user).then((function(e){t.msguser=e.data.msg,t.fetchEmployeesWithoutUser(),t.fetchUsers(),t.user={employee_id:0,username:"",user_approval:1,user_status:1},setTimeout(()=>{t.msguser=!1},3e3)})).catch(t=>{console.log(t)})},fetchUsers(){var t=this;jt.a.get("/api/getAllUsers/").then((function(e){t.usr=e.data.data})).catch(t=>{console.log(t)})}}},pe=ue,me=Object(_["a"])(pe,ne,de,!1,null,null,null),_e=me.exports,ve=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5"},[e("div",{staticClass:"form-label-group"},[e("input",{staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"searchSupplier",placeholder:"Search Product"},on:{keyup:function(e){return t.searchSupplier(e.target.value)}}}),e("label",{staticClass:"text-white",attrs:{for:"searchSupplier"}},[t._v("Search Supplier")])])]),e("div",{staticClass:"col-1 offset-6 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Suppliers"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("form",{attrs:{method:"POST",enctype:"multipart/form-data"}},[e("table",{staticClass:"table table-striped"},[t._m(0),""==t.suppliers?e("tbody",[t._m(1)]):e("tbody",t._l(t.suppliers,(function(a){return e("tr",{key:a.id,staticClass:"text-center"},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.supplier_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.supplier_phone))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.brgyDesc+", "+a.citymunDesc+", "+a.provDesc))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"fa fa-edit mr-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Edit "+a.supplier_name},on:{click:function(e){return t.editSupplier(a)}}}),e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+a.supplier_name},on:{click:function(e){return t.deleteSupplier(a.id,a.supplier_name)}}})])])})),0)])]),e("hr"),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(2)])]),e("div",{staticClass:"col-6"},[e("nav",{attrs:{"aria-label":"Page navigation example item-bottom"}},[e("ul",{staticClass:"pagination pagination-sm justify-content-end"},[e("li",{staticClass:"page-item",class:[{disabled:1==t.pagination.current_page}||""==t.pagination],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchSuppliers(t.page=t.page-1)}}},[t._v(" Prev ")])]),e("li",{staticClass:"page-item disabled"},[e("a",{staticClass:"page-link text-dark"},[t._v("Page "+t._s(t.pagination.current_page)+" of "+t._s(t.pagination.last_page))])]),e("li",{staticClass:"page-item",class:[{disabled:t.pagination.current_page==t.pagination.last_page}],staticStyle:{cursor:"pointer"}},[e("a",{staticClass:"page-link",on:{click:function(e){return t.fetchSuppliers(t.page=t.page+1)}}},[t._v(" Next ")])])])])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addSupplier"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Category")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier.supplier_name,expression:"supplier.supplier_name"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"supname",placeholder:"Supplier Name"},domProps:{value:t.supplier.supplier_name},on:{input:function(e){e.target.composing||t.$set(t.supplier,"supplier_name",e.target.value)}}}),e("label",{attrs:{for:"supname"}},[t._v("Supplier Name")])]),t.errors.supplier_name?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_name))]):t._e()]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier.supplier_phone,expression:"supplier.supplier_phone"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"supphone",placeholder:"Supplier Contact"},domProps:{value:t.supplier.supplier_phone},on:{input:function(e){e.target.composing||t.$set(t.supplier,"supplier_phone",e.target.value)}}}),e("label",{attrs:{for:"supphone"}},[t._v("Supplier Contact")])]),t.errors.supplier_phone?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_phone))]):t._e()]),e("div",{staticClass:"col-sm-4"},[t._m(3),e("select",{directives:[{name:"model",rawName:"v-model",value:t.supplier.supplier_prov,expression:"supplier.supplier_prov"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.supplier_prov},on:{input:function(e){t.fetchCityMuns(e.target.value),t.citymuns=[],t.brgys=[]},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.supplier,"supplier_prov",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select Province")]),t._l(t.provinces,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.provCode}},[t._v(t._s(a.provDesc))])}))],2),t.errors.supplier_prov?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_prov))]):t._e()]),e("div",{staticClass:"col-sm-4"},[t._m(4),e("select",{directives:[{name:"model",rawName:"v-model",value:t.supplier.supplier_citymun,expression:"supplier.supplier_citymun"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.supplier_citymun},on:{input:function(e){t.fetchBrgys(e.target.value),t.brgys=[]},change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.supplier,"supplier_citymun",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select City")]),t._l(t.citymuns,(function(a){return e("option",{key:a.id,staticClass:"text-dark",domProps:{value:a.citymunCode}},[t._v(t._s(a.citymunDesc))])}))],2),t.errors.supplier_citymun?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_citymun))]):t._e()]),e("div",{staticClass:"col-sm-4"},[t._m(5),e("select",{directives:[{name:"model",rawName:"v-model",value:t.supplier.supplier_brgy,expression:"supplier.supplier_brgy"}],staticClass:"form-control form-control-sm rounded-0 bg-transparent border-top-0 border-left-0 border-right-0",class:{"is-invalid":t.errors.supplier_brgy},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.supplier,"supplier_brgy",e.target.multiple?a:a[0])}}},[e("option",{staticClass:"text-dark",attrs:{value:"0",disabled:""}},[t._v("Select Baranggay")]),t._l(t.brgys,(function(a){return e("option",{key:a.brgyCode,staticClass:"text-dark",domProps:{value:a.brgyCode}},[t._v(t._s(a.brgyDesc))])}))],2),t.errors.supplier_brgy?e("small",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.errors.supplier_brgy))]):t._e()])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addSupplier}},[t._v("Save changes")])])])])])])},he=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"text-center"},[e("th",[t._v("Supplier Name")]),e("th",[t._v("Contact")]),e("th",[t._v("Address")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",{staticClass:"text-center"},[e("td",{attrs:{colspan:"9"}},[e("p",{staticClass:"text-danger text-center"},[t._v("No Records...")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Province")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("City/Municipality")])])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"ml-4 text-muted",attrs:{for:""}},[e("small",[t._v("Barangay")])])}],ge={data(){return{suppliers:[],category_types:[],supplier:{id:0,supplier_name:"",supplier_prov:0,supplier_citymun:0,supplier_brgy:0,supplier_phone:0},active:!1,show:!1,pagination:[],edit:!1,errors:[],page:1,msg:null,provinces:[],citymuns:[],brgys:[]}},created(){this.fetchSuppliers(this.page),this.fetchProvinces()},computed:{validCategoryName:function(){return this.category.category_name.length<=1},validCategoryType:function(){return 0==this.category.type_id},validStatus:function(){return 0==this.category.category_status}},methods:{back(){this.$router.push("/")},validSupName(){return this.supplier.supplier_name.length<=1},validContact(){return this.supplier.supplier_phone.length<=5||0==this.supplier.supplier_phone},validProvince(){return 0==this.supplier.supplier_prov},validCity(){return 0==this.supplier.supplier_citymun},validBarangay(){return 0==this.supplier.supplier_brgy},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},fetchSuppliers(t){var e=this;const s=a("bc3a");s.get("/api/getAllSuppliers/?page="+t).then((function(t){e.suppliers=t.data.data,e.pagination=t.data.pagination})).catch(t=>{console.log(t)})},fetchProvinces(){var t=this;const e=a("bc3a");e.get("/api/getAllProvinces/").then((function(e){t.provinces=e.data.data})).catch(t=>{console.log(t)})},fetchCityMuns(t){var e=this;const s=a("bc3a");s.get("/api/getCityMun/?provCode="+t).then((function(t){e.citymuns=t.data.data})).catch(t=>{console.log(t)})},fetchBrgys(t){var e=this;const s=a("bc3a");s.get("/api/getBarangay/?citymunCode="+t).then((function(t){e.brgys=t.data.data})).catch(t=>{console.log(t)})},searchSupplier(t){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchSupplier/?supplier_name="+t+"&page="+e.page).then((function(t){e.suppliers=t.data.data,e.pagination=t.data.pagination})).catch(t=>{console.log(t)})},500)},addSupplier(){var t=this;if(t.errors=[],t.validSupName()&&(t.errors.supplier_name="Please input Supplier Name."),t.validContact()&&(t.errors.supplier_phone="Please input Supplier Contact."),t.validProvince()&&(t.errors.supplier_prov="Please Select Province."),t.validCity()&&(t.errors.supplier_citymun="Please Select City."),t.validBarangay()&&(t.errors.supplier_brgy="Please Select Barangay."),!t.validSupName()&&!t.validContact()&&!t.validProvince()&&!t.validCity()&&!t.validBarangay()){const e=a("bc3a");0==t.edit?e.post("/api/addSupplier/",t.supplier).then((function(e){t.msg=e.data.msg,setTimeout(()=>{t.msg=null},2e3),t.fetchSuppliers(t.page)})).catch(t=>{console.log(t)}):e.put("/api/updateSupplier/",t.supplier).then(e=>{t.msg=e.data.msg,setTimeout(()=>{t.msg=null},2e3),t.fetchSuppliers(t.page)}).catch(t=>{console.log(t)})}},editSupplier(t){let e=this;e.toggleModal(),e.edit=!0,e.supplier.id=t.id,e.supplier.supplier_name=t.supplier_name,e.supplier.supplier_phone=t.supplier_phone,e.supplier.supplier_prov=t.supplier_prov,e.supplier.supplier_citymun=t.supplier_citymun,e.supplier.supplier_brgy=t.supplier_brgy,e.fetchCityMuns(t.supplier_prov),e.fetchBrgys(t.supplier_citymun)},deleteSupplier(t,e){if(!confirm("Do you wat to delete "+e))return!1;{const e=a("bc3a");e.put("/api/deleteSupplier/",{id:t}).then(()=>{this.fetchSuppliers(this.page)}).catch(t=>{console.log(t)})}}}},fe=ge,be=Object(_["a"])(fe,ve,he,!1,null,null,null),Ce=be.exports,ye=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-10 mx-auto"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-header bg-gradient p-0 pl-4 pr-4 pt-1"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.from_date,expression:"from_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"from_date",placeholder:"Date"},domProps:{value:t.from_date},on:{input:[function(e){e.target.composing||(t.from_date=e.target.value)},function(e){return t.fetchSpoilages(t.from_date,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"from_date"}},[t._v("From Date")])])]),e("div",{staticClass:"col-3"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.to_date,expression:"to_date"}],staticClass:"form-control form-control-sm mb-3 bg-transparent text-white rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"to_date",placeholder:"Date"},domProps:{value:t.to_date},on:{input:[function(e){e.target.composing||(t.to_date=e.target.value)},function(e){return t.fetchSpoilages(t.from_date,t.to_date)}]}}),e("label",{staticClass:"text-white",attrs:{for:"to_date"}},[t._v("To Date")])])]),e("div",{staticClass:"col-1 offset-5 mt-3"},[e("i",{staticClass:"fas fa-plus-circle fa-2x",staticStyle:{cursor:"pointer"},attrs:{title:"Add Purchase"},on:{click:function(e){t.toggleModal(),t.edit=!1}}})])])]),e("div",{staticClass:"card-body overflow-auto"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-striped text-center"},[t._m(0),e("tbody",t._l(t.spoilages,(function(a){return e("tr",{key:a.id,class:{"bg-warning":1==a.iscancel}},[e("td",{staticClass:"align-middle"},[t._v(t._s(a.id))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.employee_fn)+" "+t._s(a.employee_sn))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.spoilage_note))]),e("td",{staticClass:"align-middle"},[t._v(t._s(t.spoilageDtFormat(a.created_at)))]),e("td",{staticClass:"align-middle"},[e("i",{staticClass:"far fa-file",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.openPortal(a.id)}}})]),e("td",{staticClass:"align-middle"},[1!=a.iscancel?e("i",{staticClass:"fas fa-ban ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Cancel ID# "+a.id},on:{click:function(e){return t.cancelSpoilage(a.id)}}}):e("i",{staticClass:"fas fa-ban ml-2"})])])})),0)])])]),e("div",{staticClass:"row item-bottom p-4"},[e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.back()}}},[t._m(1)])])])])])]),e("div",{staticClass:"modal fade",class:{show:t.show,"d-block":t.active},attrs:{tabindex:"-1",role:"dialog",id:"addSpoilage"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-gradient"},[e("h5",{staticClass:"modal-title"},[t._v("Add Spoilage")]),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:t.toggleModal}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage.created_at,expression:"spoilage.created_at"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"datetime-local",id:"created_at",placeholder:"Date"},domProps:{value:t.spoilage.created_at},on:{input:function(e){e.target.composing||t.$set(t.spoilage,"created_at",e.target.value)}}}),e("label",{attrs:{for:"created_at"}},[t._v("Date")])])]),e("div",{staticClass:"col-sm-12"},[e("label",{staticClass:"ml-2 font-weight-light",attrs:{for:"comment"}},[t._v("Comment:")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.spoilage.spoilage_note,expression:"spoilage.spoilage_note"}],staticClass:"form-control form-control-sm rounded-0",attrs:{id:"comment",cols:"30",rows:"7",placeholder:"Optional"},domProps:{value:t.spoilage.spoilage_note},on:{input:function(e){e.target.composing||t.$set(t.spoilage,"spoilage_note",e.target.value)}}})]),e("hr"),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.search_product,expression:"spoilage_product.search_product"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"text",id:"search_product",placeholder:"Search Product"},domProps:{value:t.spoilage_product.search_product},on:{input:[function(e){e.target.composing||t.$set(t.spoilage_product,"search_product",e.target.value)},function(e){return t.fetchProducts(e.target.value)}]}}),e("label",{attrs:{for:"search_product"}},[t._v("Search Product")])])]),e("div",{staticClass:"col-6 p-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.product_id,expression:"spoilage_product.product_id"}],staticClass:"form-control mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{id:"product_id"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.spoilage_product,"product_id",e.target.multiple?a:a[0])},function(e){return t.fetchProductById()}]}},[e("option",{attrs:{disabled:"",value:"0"}},[t._v("Select Product")]),t._l(t.products,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s("("+a.stock_qty+") "+a.product_name))])}))],2)]),e("div",{staticClass:"col-6"},[e("div",{staticClass:"form-label-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.spoilage_product.spoilage_qty,expression:"spoilage_product.spoilage_qty"}],staticClass:"form-control form-control-sm mb-3 rounded-0 border-top-0 border-left-0 border-right-0",attrs:{type:"number",id:"spoilage_qty",min:"1",max:t.max_stock,placeholder:"Quantity"},domProps:{value:t.spoilage_product.spoilage_qty},on:{input:[function(e){e.target.composing||t.$set(t.spoilage_product,"spoilage_qty",e.target.value)},t.maxInput]}}),e("label",{attrs:{for:"spoilage_qty"}},[t._v("Quantity")])])]),e("div",{staticClass:"col-6"},[e("button",{staticClass:"btn btn-info btn-block item-bottom btn-sm rounded-0 mb-3",on:{click:t.addQueue}},[e("i",{staticClass:"fas fa-plus"}),t._v(" ADD")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table text-center"},[t._m(2),e("tbody",[t._l(t.dups,(function(a,s){return e("tr",{key:a.product_id},[e("td",[t._v(t._s(t.dups[s].product_name))]),e("td",[t._v(t._s(t.dups[s].spoilage_qty))]),e("td",[e("i",{staticClass:"fa fa-trash ml-2",staticStyle:{cursor:"pointer"},attrs:{title:"Click to Delete "+t.dups[s].product_name},on:{click:function(e){return t.deleteQueue(s)}}})])])})),t._m(3),e("tr",[e("td",{attrs:{colspan:"2"}}),e("td",{staticClass:"float-right"},[t._v(t._s(0==t.spoilageTotal?"":"Total: "))]),e("td",[t._v(t._s(0==t.spoilageTotal?"":"₱ "+t.spoilageTotal))]),e("td")])],2)])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[t.msg?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" "+t._s(t.msg)+" ")]):t._e()])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addSpoilage}},[t._v("Save changes")])])])])])])},xe=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("Cashier")]),e("th",[t._v("Note")]),e("th",[t._v("Date")]),e("th",[t._v("View")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"float-left ml-2"},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" Back")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Action")])])])},function(){var t=this,e=t._self._c;return e("tr",[e("td",{attrs:{colspan:"5"}},[e("hr")])])}],we={data(){return{msg:"",show:!1,active:!1,edit:!1,errors:[],spoilages:[],products:[],suppliers:[],queue_spoilage:[],dups:[],max_stock:0,spoilage:{cashier_id:this.$session.get("user_id"),created_at:new Date,spoilage_note:""},from_date:new Date,to_date:new Date,spoilage_product:{product_id:0,product_name:"",spoilage_qty:1,unit_price:0},page:1}},created(){this.spoilage.created_at=u()().format("YYYY-MM-DDThh:mm"),this.from_date=u()().startOf("month").format("YYYY-MM-DDThh:mm"),this.to_date=u()().endOf("month").format("YYYY-MM-DDTkk:mm"),this.fetchProducts(),this.fetchSpoilages(this.from_date,this.to_date)},computed:{spoilageTotal:function(){var t=0;return this.dups.forEach(e=>{t+=parseFloat(e.spoilage_qty*e.unit_price)}),t.toFixed(2)},validDr:function(){return this.purchase.drnum.length<=1},validSupplier:function(){return 0==this.purchase.supplier_id}},methods:{back(){this.$router.push("/")},spoilageDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},openPortal(t){let e=this.$router.resolve({name:"PSPOILAGE",query:{spoilage_id:t}});window.open(e.href,"_blank","height=500,width=800")},toggleModal(){const t=document.querySelector("body");this.active=!this.active,this.active?t.classList.add("modal-open"):t.classList.remove("modal-open"),setTimeout(()=>this.show=!this.show,10)},maxInput(t){var e=this;const a=parseInt(t.target.value),s=parseInt(t.target.min),o=parseInt(t.target.max);return a<s||Number.isNaN(a)?e.spoilage_product.spoilage_qty=0:e.spoilage_product.spoilage_qty=a>o?o:a},fetchProducts(t=""){var e=this;const s=a("bc3a");e.timer&&(clearTimeout(e.timer),e.timer=null),e.timer=setTimeout(()=>{s.get("/api/searchProductInventories/?product_name="+t).then((function(t){const a=t.data.data;e.products=a.filter(t=>0!=t.stock_qty)})).catch(t=>{console.log(t)})},500)},fetchSpoilages(t,e){var s=this;const o=a("bc3a");o.get("/api/getAllSpoilages/?from_date="+t+"&to_date="+e).then((function(t){s.spoilages=t.data.data})).catch(t=>{console.log(t)})},fetchProductById(){var t=this;const e=a("bc3a");e.get("/api/getProductInventoriesById/?product_id="+t.spoilage_product.product_id).then((function(e){const a=e.data.data;a.forEach(e=>{t.spoilage_product.product_name=e.product_name,t.max_stock=e.stock_qty})})).catch(t=>{console.log(t)})},addSpoilage(){var t=this,e=new Array({spoilage:t.spoilage,spoilage_product:t.dups});const s=a("bc3a");s.post("/api/addSpoilage/",e).then((function(e){console.log(e.data),e.data&&(t.spoilage={cashier_id:t.$session.get("user_id"),created_at:u()(new Date).format("YYYY-MM-DDThh:mm"),spoilage_note:""},t.spoilage_product={product_id:0,product_name:"",spoilage_qty:1,unit_price:0},t.dups=[],t.toggleModal(),t.fetchProducts(),t.fetchSpoilages(t.from_date,t.to_date))})).catch(t=>{console.log(t)})},cancelSpoilage(t){var e=this;const s=a("bc3a");confirm("Do you want to cancel spoilage ID# "+t)&&s.put("/api/cancelSpoilageById/",{spoilage_id:t}).then((function(){e.fetchProducts(),e.fetchSpoilages(e.from_date,e.to_date)})).catch(t=>{console.log(t)})},addQueue(){var t=this;0!=t.spoilage_product.product_id&&t.queue_spoilage.push({...this.spoilage_product}),t.queue_spoilage.filter((function(e,a){a===t.queue_spoilage.length-1&&-1==t.dups.map((function(t){return t.product_id})).indexOf(e.product_id)&&t.dups.push({product_id:e.product_id,product_name:e.product_name,spoilage_qty:e.spoilage_qty,unit_price:e.unit_price})}))},deleteQueue(t){this.dups.splice(t,1)}}},Pe=we,ke=Object(_["a"])(Pe,ye,xe,!1,null,null,null),Se=ke.exports,De=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-sm-6 mt-3"},[e("strong",[t._v("From:")]),t._v(" "+t._s(t.fdate))]),e("div",{staticClass:"col-sm-6 mt-3"},[e("strong",[t._v("To:")]),t._v(" "+t._s(t.tdate))]),e("div",{staticClass:"col-sm-6 mt-3"},[e("strong",[t._v("Category:")]),t._v(" "+t._s(""!=t.categories?t.categories:"All Categories"))]),e("div",{staticClass:"col-sm-12 mt-4"},[e("div",{staticClass:"card fullheight rounded-0"},[e("div",{staticClass:"card-body"},[e("table",{staticClass:"table text-center"},[t._m(1),e("tbody",t._l(t.inventories,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[t._v(t._s(a.product_name))]),e("td",[t._v(t._s(a.category_name))]),e("td",[t._v(t._s(a.begstock_qty))]),e("td",[t._v(t._s(a.purchase_qty))]),e("td",[t._v(t._s(a.sales_qty))]),e("td",[t._v(t._s(a.spoilage_qty))]),e("td",[t._v(t._s(a.endstock_qty))])])})),0)])])])])]),t._m(2),t._m(3)])},Te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-12 text-center"},[e("h5",[t._v("Cabanatuan City, Nueva Ecija")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product")]),e("th",[t._v("Category")]),e("th",[t._v("Beginning")]),e("th",[t._v("Purchase")]),e("th",[t._v("Sold")]),e("th",[t._v("Spoilage")]),e("th",[t._v("Ending")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-5"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],Ne={data(){return{categories:[],inventories:[],page:1,fdate:u()(this.$route.query.fdate).format("MMM DD, YYYY hh:mm A"),tdate:u()(this.$route.query.tdate).format("MMM DD, YYYY hh:mm A")}},created(){this.fetchCategories(this.$route.query.catid),this.fetchInventory()},methods:{back(){this.$router.push("/")},fetchCategories(t){var e=this;const s=a("bc3a");s.get("/api/getCategoryName/?id="+t).then((function(t){e.categories=t.data.data})).catch(t=>{console.log(t)})},fetchInventory(){var t=this;const e=a("bc3a");e.get("/api/getAllInventories/?page=&fdate="+this.$route.query.fdate+"&tdate="+this.$route.query.tdate+"&category_id="+this.$route.query.catid+"&product_name="+this.$route.query.product_name).then((function(e){t.inventories=e.data.data,t.loading=!1})).catch(t=>{console.log(t)})}}},Ae=Ne,Me=Object(_["a"])(Ae,De,Te,!1,null,null,null),Ye=Me.exports,qe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row no-gutters bg-light"},[e("div",{staticClass:"col-12 mb-4 font-weight-bold text-center"},[t._v(" Dated From : "+t._s(t.fdate)+" To : "+t._s(t.tdate)+" ")]),1==t.$route.query.typeid?e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(0),t._l(t.sales_prods,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",{staticClass:"align-middle"},[t._v(t._s(a.product_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.unit_price))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.tot_qty))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.unit_price*a.tot_qty).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_amount))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_disc))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_vat))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc-a.unit_price*a.tot_qty).toFixed(2)))])])])})),e("tbody",[e("tr",{staticClass:"font-weight-bold"},[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v("TOTAL:")]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.unitCostTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.salesTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.discountTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.vatTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalAmount))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalProfit))])])])],2)]):2==t.$route.query.typeid?e("div",{staticClass:"col-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(1),t._l(t.sales_cats,(function(a){return e("tbody",{key:a.category_id},[e("tr",[e("td",{staticClass:"align-middle"},[t._v(t._s(a.category_name))]),e("td",{staticClass:"align-middle"},[t._v(t._s(a.tot_qty))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.unit_price))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_cost))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_amount))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_disc))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s(a.tot_vat))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc).toFixed(2)))]),e("td",{staticClass:"align-middle"},[t._v("₱ "+t._s((a.tot_amount-a.tot_vat-a.tot_disc-a.tot_cost).toFixed(2)))])])])})),e("tbody",[e("tr",{staticClass:"font-weight-bold"},[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("TOTAL:")]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.unitCostTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.salesTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.discountTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.vatTotal))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalAmount))]),e("td",{staticClass:"text-center"},[t._v("₱ "+t._s(t.totalProfit))])])])],2)]):t._e()])},je=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Category")]),e("th",[t._v("Unit Cost")]),e("th",[t._v("Sold")]),e("th",[t._v("Total Cost")]),e("th",[t._v("Total Price")]),e("th",[t._v("Discount")]),e("th",[t._v("Vat Amount")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Total Profit")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("th",[t._v("Category Name")]),e("th",[t._v("Sold")]),e("th",[t._v("Unit Cost")]),e("th",[t._v("Total Cost")]),e("th",[t._v("Total Price")]),e("th",[t._v("Discount")]),e("th",[t._v("Vat")]),e("th",[t._v("Total Amount")]),e("th",[t._v("Total Profit")])])}],Ee={data(){return{sales_cats:[],sales_prods:[],fdate:u()(this.$route.query.fdate).format("MMM DD, YYYY"),tdate:u()(this.$route.query.tdate).format("MMM DD, YYYY")}},created(){this.fetchSalesProduct()},methods:{fetchSalesProduct(){let t=this;const e=a("bc3a");e.get("/api/getAllSalesProduct/?frdate="+t.$route.query.fdate+"&tdate="+t.$route.query.tdate).then((function(e){const a=e.data.data;t.sales_prods=a.filter(t=>0!=t.tot_qty)})).catch(t=>{console.log(t)}),e.get("/api/getAllSalesCategory/?frdate="+t.$route.query.fdate+"&tdate="+t.$route.query.tdate).then((function(e){const a=e.data.data;t.sales_cats=a.filter(t=>0!=t.tot_qty)})).catch(t=>{console.log(t)})}},computed:{salesTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_amount)}),t.toFixed(2)},unitCostTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.unit_price*e.tot_qty)}),t.toFixed(2)},vatTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_vat)}),t.toFixed(2)},discountTotal:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_disc)}),t.toFixed(2)},totalAmount:function(){var t=0;return this.sales_prods.forEach(e=>{t+=parseFloat(e.tot_amount-e.tot_vat-e.tot_disc)}),t.toFixed(2)},totalProfit:function(){return(this.totalAmount-this.unitCostTotal).toFixed(2)}}},Ie=Ee,$e=Object(_["a"])(Ie,qe,je,!1,null,null,null),Oe=$e.exports,Be=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[t._m(0),e("div",{staticClass:"col-sm-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6"},[e("p",[e("b",[t._v("Cashier: ")]),t._v(t._s(t.sales.employee_fn+" "+t.sales.employee_sn))])]),e("div",{staticClass:"col-sm-6"},[e("p",[e("b",[t._v("Customer: ")]),t._v(t._s(t.sales.customer_name))])]),e("div",{staticClass:"col-sm-6"},[e("p",[e("b",[t._v("Payment: ")]),t._v(t._s(t.sales.payment_name))])]),e("div",{staticClass:"col-sm-6"},[e("p",[e("b",[t._v("Date: ")]),t._v(t._s(t.dtFormat(t.sales.created_at)))])])])]),e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table table-sm text-center"},[t._m(1),t._l(t.sales_orders,(function(a){return e("tbody",{key:a.sales_id},[e("tr",[e("td",[t._v(t._s(a.product_name))]),e("td",[t._v(t._s(a.product_qty))]),e("td",[t._v("₱ "+t._s(a.vat_amount))]),e("td",[t._v("₱ "+t._s(a.discount_amount))]),e("td",[t._v("₱ "+t._s(a.total_amount))])])])}))],2)]),t._m(2),t._m(3)])},Fe=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-sm-12 text-center"},[e("h2",[t._v("Generic POS")])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")]),e("th",[t._v("Vat")]),e("th",[t._v("Discount")]),e("th",[t._v("Total")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-5"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],Re={data(){return{sales_orders:[],sales:[]}},created(){this.fetchSalesOrder(),this.fetchSalesInvoiceById()},methods:{dtFormat(t){return u()(t).format("MMM DD, YYYY hh:mm A")},fetchSalesOrder(){let t=this;jt.a.get("/api/getSalesOrderById/?sales_id="+this.$route.query.sales_id).then((function(e){t.sales_orders=e.data.data})).catch(t=>{console.log(t)})},fetchSalesInvoiceById(){let t=this;jt.a.get("/api/getSalesInvoiceById/?id="+this.$route.query.sales_id).then((function(e){console.log(e.data),t.sales=e.data[0]})).catch(t=>{console.log(t)})}}},Ue=Re,Le=Object(_["a"])(Ue,Be,Fe,!1,null,null,null),ze=Le.exports,Qe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[t._m(0),t._l(t.remittances,(function(a){return e("div",{key:a.id,staticClass:"row mx-auto"},[1==a.iscancel?e("img",{staticStyle:{position:"absolute",width:"600px","z-index":"10"},attrs:{src:t.imgURL+"cancelled.png"}}):t._e(),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Remitted By:")]),t._v(" "+t._s(a.employee_fn+" "+a.employee_sn))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Date:")]),t._v(" "+t._s(t.remitDtFormat(a.created_at)))])])})),e("br"),e("br"),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table text-center"},[t._m(1),e("tbody",t._l(t.remit_details,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",[t._v(t._s(a.remit_qty))]),e("td",[t._v("₱ "+t._s(a.remit_amount))]),e("td",[t._v("₱ "+t._s(a.remit_total))])])})),0),e("tbody",[e("tr",[e("td",{staticClass:"text-right font-weight-bold",attrs:{colspan:"2"}},[t._v("Total:")]),e("td",[t._v("₱ "+t._s(t.totalAmount))])])])])])]),t._m(2),t._m(3)],2)},He=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("h5",[t._v("Cabanatuan City, Nueva Ecija")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Quantity")]),e("th",[t._v("Amount")]),e("th",[t._v("Total")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-4"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],Ve={data(){return{remittances:[],remit_details:[],imgURL:"/grocery/public/images/"}},created(){this.fetchRemittances(),this.fetchRemittanceDetails()},computed:{totalAmount:function(){var t=0;return this.remit_details.forEach(e=>{t+=parseFloat(e.remit_total)}),t.toFixed(2)}},methods:{remitDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},fetchRemittances(){var t=this;const e=a("bc3a");e.get("/api/getAllRemittancesById/?remit_id="+t.$route.query.remit_id).then((function(e){t.remittances=e.data.data})).catch(t=>{console.log(t)})},fetchRemittanceDetails(){var t=this;const e=a("bc3a");e.get("/api/getAllRemittanceDetailsById/?remit_id="+t.$route.query.remit_id).then((function(e){t.remit_details=e.data.data})).catch(t=>{console.log(t)})}}},Ge=Ve,Xe=Object(_["a"])(Ge,Qe,He,!1,null,null,null),We=Xe.exports,Je=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container",staticStyle:{"background-color":"#ffffff"}},[t._m(0),1==t.spoilage.iscancel?e("img",{staticStyle:{position:"absolute",width:"600px","z-index":"10"},attrs:{src:t.imgURL+"cancelled.png"}}):t._e(),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Remitted By:")]),t._v(" "+t._s(t.spoilage.employee_fn+" "+t.spoilage.employee_sn))]),e("div",{staticClass:"col-sm-6"},[e("strong",[t._v("Date:")]),t._v(" "+t._s(t.spoilageDtFormat(t.spoilage.created_at)))])]),e("br"),e("br"),e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12"},[e("table",{staticClass:"table text-center"},[t._m(1),e("tbody",t._l(t.spoilage_products,(function(a){return e("tr",{key:a.id,staticClass:"border-bottom"},[e("td",{staticClass:"border-bottom"},[t._v(t._s(a.product_name))]),e("td",{staticClass:"border-bottom"},[t._v(t._s(a.spoilage_qty))])])})),0)])])]),t._m(2),t._m(3)])},Ze=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-12 text-center"},[e("h5",[t._v("Cabanatuan City, Nueva Ecija")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Product Name")]),e("th",[t._v("Quantity")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto mt-4"},[e("div",{staticClass:"col-sm-4 signature"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row mx-auto"},[e("div",{staticClass:"col-sm-4"},[t._v(" Checked By: ")])])}],Ke={data(){return{spoilage:[],spoilage_products:[],imgURL:"/grocery/public/images/"}},created(){this.fetchSpoilage(),this.fetchSpoilageProducts()},computed:{},methods:{spoilageDtFormat(t){return u()(t).format("MMMM DD, YYYY hh:mm:ss A")},fetchSpoilage(){var t=this;const e=a("bc3a");e.get("/api/getSpoilageById/?spoilage_id="+t.$route.query.spoilage_id).then((function(e){t.spoilage=e.data[0]})).catch(t=>{console.log(t)})},fetchSpoilageProducts(){var t=this;const e=a("bc3a");e.get("/api/getAllSpoilageProductsById/?spoilage_id="+t.$route.query.spoilage_id).then((function(e){t.spoilage_products=e.data.data})).catch(t=>{console.log(t)})}}},ta=Ke,ea=Object(_["a"])(ta,Je,Ze,!1,null,null,null),aa=ea.exports,sa=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fullheight"},[e("div",{staticClass:"container h-100 text-center"},[e("div",{staticClass:"row h-100 justify-content-center align-items-center"},[e("div",{staticClass:"col-12"},[e("h1",{staticClass:"display-2"},[t._v("₱ "+t._s(t.$route.params.change))]),e("router-link",{staticClass:"pt-3",attrs:{to:"/terminal"}},[e("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v(" Go back")])],1)])])])},oa=[],ra={mounted(){this.$route.params.change||this.$router.push("/")},created(){const t=a("bc3a");t.post("/api/printReceipt/",{order_id:this.$route.params.order_id}).then(()=>{}).catch(t=>{console.log(t)})}},ia=ra,la=Object(_["a"])(ia,sa,oa,!1,null,null,null),ca=la.exports;l["a"].use(g["a"]),l["a"].use(b.a),l["a"].use(C["c"]);const na=l["a"].prototype.$session,da=[{path:"/",name:"HOME",component:S},{path:"/login",name:"Login",component:Y},{path:"/terminal",name:"POS TERMINAL",component:F},{path:"/terminal/payment",name:"PAYMENT",component:H},{path:"/product",name:"PRODUCTS",component:Z},{path:"/category",name:"CATEGORIES",component:ot},{path:"/purchase",name:"PURCHASES",component:dt},{path:"/purchase-product",name:"PURCHASE PRODUCTS",component:ht},{path:"/inventory",name:"INVENTORY",component:xt},{path:"/sales-report",name:"SALES REPORT",component:Ot},{path:"/cash-drop",name:"CASH DROP",component:zt},{path:"/expense",name:"CASH EXPENSE",component:Wt},{path:"/expense-details",name:"EXPENSE DETAILS",component:ae},{path:"/spoilage",name:"SPOILAGE",component:ce},{path:"/settings",name:"SETTINGS",component:_e},{path:"/supplier",name:"SUPPLIERS",component:Ce},{path:"/change-item",name:"CHANGE ITEM",component:Se},{path:"/print/inventory",name:"Print Inventory",component:Ye},{path:"/print/sales",name:"Print Sales",component:Oe},{path:"/print/sales-receipt",name:"SALES RECEIPT",component:ze},{path:"/print/cash-drop",name:"REMITTANCE",component:We},{path:"/print/spoilage",name:"PSPOILAGE",component:aa},{path:"/change",name:"CHANGE",component:ca}],ua=new g["a"]({mode:"history",base:"/grocery/",routes:da});ua.beforeEach((t,e,a)=>{"Login"===t.name||na.exists()?a():a({name:"Login"})});var pa=ua;a("becf"),a("ab8b"),a("034b"),a("f507");jt.a.defaults.baseURL="http://localhost:8081/grocery/public",l["a"].config.productionTip=!1,new l["a"]({router:pa,render:t=>t(h)}).$mount("#app")}});
//# sourceMappingURL=app.9d475c31.js.map